import{a as Gt}from"./axios-aba6f0e0.js";window.axios=Gt;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");function mi(){Gt.post(route("misc.keep-alive"))}setTimeout(()=>{mi(),setTimeout(mi,3600*1e3)},3600*1e3);window.chatId=parseInt(document.querySelector("#chat-id").value);window.authUserId=parseInt(document.querySelector("#auth-user-id").value);window.authUserCurrentChatUserDataRole=document.querySelector("#user-role").value;window.telegramChatMemberCount=0;window.discordChatMemberCount=0;window.chatOpened=!1;const Ys=i=>{const e=window.getComputedStyle(i);return e.display==="none"||e.visibility==="hidden"};window.doHasTouchScreen=()=>{if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("msMaxTouchPoints"in navigator)return navigator.msMaxTouchPoints>0;{const i=matchMedia==null?void 0:matchMedia("(pointer:coarse)");if((i==null?void 0:i.media)==="(pointer:coarse)")return!!i.matches;if("orientation"in window)return!0;{const e=navigator.userAgent;return/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(e)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(e)}}};window.hasTouchScreen=doHasTouchScreen();window.setChatHeight=()=>{let i=document.querySelector("#chat-header-section").offsetHeight,e=document.querySelector("#chat-input-section").offsetHeight,t=i+e;const s=document.querySelector("#chat-messages-section"),n=`calc(100vh - ${t}px)`;s.style.setProperty("height",n),s.style.setProperty("top",`${i}px`)};window.getMinChatWidth=function(){return document.querySelector("#chat-minimized-content").offsetWidth+15};window.setMinChatWidth=function(){const i=document.querySelector("#chat-minimized-section");if(!Ys(i)){let e=getMinChatWidth();window.parent.postMessage({width:`${e}px`},"*")}};window.removeTags=i=>{const e=/<.*>.*?/ig;return i.replaceAll(e,"")};window.triggerClick=i=>{const e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(e)};window.reloadPage=(i=null,e,t)=>{const s=new URL(i||window.location);s.searchParams.set(e,t),window.location=s.href};window.getSyncChatMemberCount=()=>{Gt.get(route("sync.all.member-count",chatId)).then(i=>{window.telegramChatMemberCount=i.data.telegram,window.discordChatMemberCount=i.data.discord})};window.shortenNumber=new Intl.NumberFormat("en-GB",{notation:"compact",compactDisplay:"short"});getSyncChatMemberCount();window.repliesChatBubble=i=>{let e="";return i.is_reply&&i.replies.forEach(t=>{let s=t.message.message!==""?removeTags(t.message.message):"attachment";e+=`<div class="mt-1">
                <span class="inline-block align-text-bottom h-12">
                    <div class="bg-gray-200 border-l-4 border-solid border-gray-500 px-2 py-1 h-full">
                        <div class="font-bold truncate text-md text-left w-[100px] max-w-[100px]">
                            ${t.message.user.name}
                        </div>
                        <div class="truncate text-xs text-left w-[100px] max-w-[100px]">
                            ${s}
                        </div>
                    </div>
                </span>
            </div>`}),e};window.attachmentChatBubble=i=>{let e="";if(i.image_attachment_paths&&i.image_attachment_paths.split(";").forEach(t=>{e+=`<a class="glightbox" data-gallery="gallery${i.id}" href="${t}" target="_blank">
                <img src="${t}" alt="" srcset="" class="w-32 mt-1">
            </a>
            `}),i.video_attachment_paths&&i.video_attachment_paths.split(";").forEach(t=>{e+=`<a class="glightbox" data-gallery="gallery${i.id}" href="${t}" target="_blank">
                <video src="${t}" class="w-32 mt-1" preload="metadata">
            </a>
            `}),i.other_attachment_paths&&i.other_attachment_paths.from=="telegram"){const t=route("sync.telegram.download-file",i.other_attachment_paths.file_id);e+=`<a href="${t}" target="_blank">
                <svg class="w-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z" />
                </svg>
            </a>
            `}return e};window.toggleModeratorText=i=>{let e="";return i=="moderator"?e+=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5">
            <path d="M10.375 2.25a4.125 4.125 0 100 8.25 4.125 4.125 0 000-8.25zM10.375 12a7.125 7.125 0 00-7.124 7.247.75.75 0 00.363.63 13.067 13.067 0 006.761 1.873c2.472 0 4.786-.684 6.76-1.873a.75.75 0 00.364-.63l.001-.12v-.002A7.125 7.125 0 0010.375 12zM16 9.75a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z" />
        </svg>
        <span class="inline-block align-middle">Remove from Moderator</span>`:e+=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5">
            <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
        </svg>
        <span class="inline-block align-middle">Add as Moderator</span>`,e};window.actionButtonBubble=(i,e)=>{let t="";const s=i.message?removeTags(i.message):"attachment";return t+=`<div data-message-id="${i.id}" data-message-sender="${i.user.name}" data-message='${s}' class="hidden group-hover/chat:block hover:cursor-pointer border-gray-300 border bg-white p-2 rounded-md message-reply-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
            <path fill-rule="evenodd" d="M9.53 2.47a.75.75 0 010 1.06L4.81 8.25H15a6.75 6.75 0 010 13.5h-3a.75.75 0 010-1.5h3a5.25 5.25 0 100-10.5H4.81l4.72 4.72a.75.75 0 11-1.06 1.06l-6-6a.75.75 0 010-1.06l6-6a.75.75 0 011.06 0z" clip-rule="evenodd" />
        </svg>
    </div>`,(authUserCurrentChatUserDataRole=="admin"||authUserCurrentChatUserDataRole=="moderator")&&(t+=`<div data-message-id="${i.id}" class="hidden group-hover/chat:block hover:cursor-pointer border-gray-300 border bg-white p-2 rounded-md chat-delete-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z" clip-rule="evenodd" />
            </svg>
        </div>`),authUserCurrentChatUserDataRole=="admin"&&e.role!=="admin"&&(t+=`<label title="Ban this user" for="ban-user-modal" data-message-id="${i.id}" data-message-sender="${i.user.name}" class="hidden group-hover/chat:block hover:cursor-pointer border-gray-300 border bg-white p-2 rounded-md ban-user-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M6.72 5.66l11.62 11.62A8.25 8.25 0 006.72 5.66zm10.56 12.68L5.66 6.72a8.25 8.25 0 0011.62 11.62zM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788z" clip-rule="evenodd" />
            </svg>
        </label>`,t+=`<label title="More settings" for="more-settings-modal" data-message-sender-id="${i.user.id}" data-message-sender="${i.user.name}" data-message-sender-role="${e.role}" class="hidden group-hover/chat:block hover:cursor-pointer border-gray-300 border bg-white p-2 rounded-md more-settings-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z" clip-rule="evenodd" />
            </svg>
        </label>`),t};window.updateChatBubble=(i,e,t)=>{let s=repliesChatBubble(i),n=attachmentChatBubble(i),a=actionButtonBubble(i,e);const h=`<hr data-message-id="${i.id}">
    <div data-message-id="${i.id}" class="chat chat-start group/chat">
        <div class="chat-image avatar self-start">
            <div class="w-10 rounded-full">
                <img src="${e.profile_picture}" />
            </div>
        </div>
        <div class="chat-header mb-0 w-full">
            <span class="font-bold float-left">
                ${i.user.name}
                <div class="badge ${e.role=="admin"?"badge-error":"badge-info"} uppercase ml-1 text-xs">
                    ${e.role}
                </div>
            </span>
            <time class="text-xs opacity-50 float-right">${t}</time>
        </div>
        <div class="flex space-x-3">
            <div class="w-72 md:w-full lg:w-full">
                ${s}
                <span class="break-words text-sm">${i.message}</span>
                ${n}
            </div>
        </div>
        <div class="inline-flex chat-header z-50 relative ml-auto -mb-6 bottom-4">
            ${a}
        </div>
    </div>`,u=new DOMParser().parseFromString(h,"text/html");document.querySelector("#chat-messages").prepend(...u.body.children),startGlightbox()};window.removeChatBubble=i=>{document.querySelectorAll(`[data-message-id="${i}"]`).forEach(e=>{e.remove()})};const le=Object.create(null);le.open="0";le.close="1";le.ping="2";le.pong="3";le.message="4";le.upgrade="5";le.noop="6";const tt=Object.create(null);Object.keys(le).forEach(i=>{tt[le[i]]=i});const Xs={type:"error",data:"parser error"},Us=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ks=typeof ArrayBuffer=="function",Gs=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,Di=({type:i,data:e},t,s)=>Us&&e instanceof Blob?t?s(e):pi(e,s):Ks&&(e instanceof ArrayBuffer||Gs(e))?t?s(e):pi(new Blob([e]),s):s(le[i]+(e||"")),pi=(i,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(i)},gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<gi.length;i++)qe[gi.charCodeAt(i)]=i;const Js=i=>{let e=i.length*.75,t=i.length,s,n=0,a,h,u,p;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);const b=new ArrayBuffer(e),w=new Uint8Array(b);for(s=0;s<t;s+=4)a=qe[i.charCodeAt(s)],h=qe[i.charCodeAt(s+1)],u=qe[i.charCodeAt(s+2)],p=qe[i.charCodeAt(s+3)],w[n++]=a<<2|h>>4,w[n++]=(h&15)<<4|u>>2,w[n++]=(u&3)<<6|p&63;return b},Qs=typeof ArrayBuffer=="function",Hi=(i,e)=>{if(typeof i!="string")return{type:"message",data:Vi(i,e)};const t=i.charAt(0);return t==="b"?{type:"message",data:Zs(i.substring(1),e)}:tt[t]?i.length>1?{type:tt[t],data:i.substring(1)}:{type:tt[t]}:Xs},Zs=(i,e)=>{if(Qs){const t=Js(i);return Vi(t,e)}else return{base64:!0,data:i}},Vi=(i,e)=>{switch(e){case"blob":return i instanceof ArrayBuffer?new Blob([i]):i;case"arraybuffer":default:return i}},Wi=String.fromCharCode(30),eo=(i,e)=>{const t=i.length,s=new Array(t);let n=0;i.forEach((a,h)=>{Di(a,!1,u=>{s[h]=u,++n===t&&e(s.join(Wi))})})},to=(i,e)=>{const t=i.split(Wi),s=[];for(let n=0;n<t.length;n++){const a=Hi(t[n],e);if(s.push(a),a.type==="error")break}return s},Yi=4;function F(i){if(i)return io(i)}function io(i){for(var e in F.prototype)i[e]=F.prototype[e];return i}F.prototype.on=F.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};F.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};F.prototype.off=F.prototype.removeListener=F.prototype.removeAllListeners=F.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var s,n=0;n<t.length;n++)if(s=t[n],s===e||s.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+i],this};F.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,n=t.length;s<n;++s)t[s].apply(this,e)}return this};F.prototype.emitReserved=F.prototype.emit;F.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};F.prototype.hasListeners=function(i){return!!this.listeners(i).length};const te=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function Xi(i,...e){return e.reduce((t,s)=>(i.hasOwnProperty(s)&&(t[s]=i[s]),t),{})}const so=te.setTimeout,oo=te.clearTimeout;function vt(i,e){e.useNativeTimers?(i.setTimeoutFn=so.bind(te),i.clearTimeoutFn=oo.bind(te)):(i.setTimeoutFn=te.setTimeout.bind(te),i.clearTimeoutFn=te.clearTimeout.bind(te))}const no=1.33;function ro(i){return typeof i=="string"?ao(i):Math.ceil((i.byteLength||i.size)*no)}function ao(i){let e=0,t=0;for(let s=0,n=i.length;s<n;s++)e=i.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}class co extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Ui extends F{constructor(e){super(),this.writable=!1,vt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,s){return super.emitReserved("error",new co(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Hi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const Ki="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),It=64,lo={};let fi=0,Je=0,yi;function vi(i){let e="";do e=Ki[i%It]+e,i=Math.floor(i/It);while(i>0);return e}function Gi(){const i=vi(+new Date);return i!==yi?(fi=0,yi=i):i+"."+vi(fi++)}for(;Je<It;Je++)lo[Ki[Je]]=Je;function Ji(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function ho(i){let e={},t=i.split("&");for(let s=0,n=t.length;s<n;s++){let a=t[s].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}let Qi=!1;try{Qi=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uo=Qi;function Zi(i){const e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||uo))return new XMLHttpRequest}catch{}if(!e)try{return new te[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function mo(){}const po=function(){return new Zi({xdomain:!1}).responseType!=null}();class go extends Ui{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==s}const t=e&&e.forceBase64;this.supportsBinary=po&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};to(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,eo(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Gi()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const n=Ji(e),a=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new ae(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(n,a)=>{this.onError("xhr post error",n,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class ae extends F{constructor(e,t){super(),vt(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=Xi(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new Zi(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&t.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=ae.requestsCount++,ae.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=mo,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ae.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ae.requestsCount=0;ae.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wi);else if(typeof addEventListener=="function"){const i="onpagehide"in te?"pagehide":"unload";addEventListener(i,wi,!1)}}function wi(){for(let i in ae.requests)ae.requests.hasOwnProperty(i)&&ae.requests[i].abort()}const es=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),Qe=te.WebSocket||te.MozWebSocket,bi=!0,fo="arraybuffer",xi=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yo extends Ui{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=xi?{}:Xi(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=bi&&!xi?t?new Qe(e,t):new Qe(e):new Qe(e,t,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||fo,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],n=t===e.length-1;Di(s,this.supportsBinary,a=>{const h={};try{bi&&this.ws.send(a)}catch{}n&&es(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Gi()),this.supportsBinary||(e.b64=1);const n=Ji(e),a=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!!Qe}}const vo={websocket:yo,polling:go},wo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $t(i){const e=i,t=i.indexOf("["),s=i.indexOf("]");t!=-1&&s!=-1&&(i=i.substring(0,t)+i.substring(t,s).replace(/:/g,";")+i.substring(s,i.length));let n=wo.exec(i||""),a={},h=14;for(;h--;)a[bo[h]]=n[h]||"";return t!=-1&&s!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=xo(a,a.path),a.queryKey=Co(a,a.query),a}function xo(i,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Co(i,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,a){n&&(t[n]=a)}),t}let ts=class Le extends F{constructor(e,t={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(t=e,e=null),e?(e=$t(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=$t(t.host).host),vt(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ho(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Yi,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new vo[e](s)}open(){let e;if(this.opts.rememberUpgrade&&Le.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),s=!1;Le.priorWebsocketSuccess=!1;const n=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",g=>{if(!s)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Le.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(w(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=t.name,this.emitReserved("upgradeError",x)}}))};function a(){s||(s=!0,w(),t.close(),t=null)}const h=g=>{const x=new Error("probe error: "+g);x.transport=t.name,a(),this.emitReserved("upgradeError",x)};function u(){h("transport closed")}function p(){h("socket closed")}function b(g){t&&g.name!==t.name&&a()}const w=()=>{t.removeListener("open",n),t.removeListener("error",h),t.removeListener("close",u),this.off("close",p),this.off("upgrading",b)};t.once("open",n),t.once("error",h),t.once("close",u),this.once("close",p),this.once("upgrading",b),t.open()}onOpen(){if(this.readyState="open",Le.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(t+=ro(n)),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,n){if(typeof t=="function"&&(n=t,t=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:e,data:t,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){Le.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const n=e.length;for(;s<n;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}};ts.protocol=Yi;function ko(i,e="",t){let s=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),s=$t(i)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+e,s.href=s.protocol+"://"+a+(t&&t.port===s.port?"":":"+s.port),s}const So=typeof ArrayBuffer=="function",_o=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,is=Object.prototype.toString,Eo=typeof Blob=="function"||typeof Blob<"u"&&is.call(Blob)==="[object BlobConstructor]",jo=typeof File=="function"||typeof File<"u"&&is.call(File)==="[object FileConstructor]";function Jt(i){return So&&(i instanceof ArrayBuffer||_o(i))||Eo&&i instanceof Blob||jo&&i instanceof File}function it(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,s=i.length;t<s;t++)if(it(i[t]))return!0;return!1}if(Jt(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return it(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&it(i[t]))return!0;return!1}function Ao(i){const e=[],t=i.data,s=i;return s.data=Bt(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Bt(i,e){if(!i)return i;if(Jt(i)){const t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){const t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=Bt(i[s],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){const t={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=Bt(i[s],e));return t}return i}function To(i,e){return i.data=Ot(i.data,e),delete i.attachments,i}function Ot(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=Ot(i[t],e);else if(typeof i=="object")for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=Ot(i[t],e));return i}const Lo=5;var z;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(z||(z={}));class Po{constructor(e){this.replacer=e}encode(e){return(e.type===z.EVENT||e.type===z.ACK)&&it(e)?this.encodeAsBinary({type:e.type===z.EVENT?z.BINARY_EVENT:z.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===z.BINARY_EVENT||e.type===z.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ao(e),s=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(s),n}}class Qt extends F{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===z.BINARY_EVENT;s||t.type===z.BINARY_ACK?(t.type=s?z.EVENT:z.ACK,this.reconstructor=new zo(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Jt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(z[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===z.BINARY_EVENT||s.type===z.BINARY_ACK){const a=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const h=e.substring(a,t);if(h!=Number(h)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(h)}if(e.charAt(t+1)==="/"){const a=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(a,t)}else s.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const a=t+1;for(;++t;){const h=e.charAt(t);if(h==null||Number(h)!=h){--t;break}if(t===e.length)break}s.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(Qt.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case z.CONNECT:return typeof t=="object";case z.DISCONNECT:return t===void 0;case z.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case z.EVENT:case z.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case z.ACK:case z.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=To(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Io=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Qt,Encoder:Po,get PacketType(){return z},protocol:Lo},Symbol.toStringTag,{value:"Module"}));function oe(i,e,t){return i.on(e,t),function(){i.off(e,t)}}const $o=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ss extends F{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[oe(e,"open",this.onopen.bind(this)),oe(e,"packet",this.onpacket.bind(this)),oe(e,"error",this.onerror.bind(this)),oe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if($o.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:z.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const h=this.ids++,u=t.pop();this._registerAckCallback(h,u),s.id=h}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var s;const n=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===e&&this.sendBuffer.splice(h,1);t.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...h)=>{this.io.clearTimeoutFn(a),t.apply(this,[null,...h])}}emitWithAck(e,...t){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,a)=>{t.push((h,u)=>s?h?a(h):n(u):n(h)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...a)=>s!==this._queue[0]?void 0:(n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:z.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case z.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case z.EVENT:case z.BINARY_EVENT:this.onevent(e);break;case z.ACK:case z.BINARY_ACK:this.onack(e);break;case z.DISCONNECT:this.ondisconnect();break;case z.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...n){s||(s=!0,t.packet({type:z.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Be(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Be.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};Be.prototype.reset=function(){this.attempts=0};Be.prototype.setMin=function(i){this.ms=i};Be.prototype.setMax=function(i){this.max=i};Be.prototype.setJitter=function(i){this.jitter=i};class Mt extends F{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,vt(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Be({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||Io;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ts(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=oe(t,"open",function(){s.onopen(),e&&e()}),a=oe(t,"error",h=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",h),e?e(h):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const h=this._timeout;h===0&&n();const u=this.setTimeoutFn(()=>{n(),t.close(),t.emit("error",new Error("timeout"))},h);this.opts.autoUnref&&u.unref(),this.subs.push(function(){clearTimeout(u)})}return this.subs.push(n),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(oe(e,"ping",this.onping.bind(this)),oe(e,"data",this.ondata.bind(this)),oe(e,"error",this.onerror.bind(this)),oe(e,"close",this.onclose.bind(this)),oe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){es(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new ss(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oe={};function st(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};const t=ko(i,e.path||"/socket.io"),s=t.source,n=t.id,a=t.path,h=Oe[n]&&a in Oe[n].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||h;let p;return u?p=new Mt(s,e):(Oe[n]||(Oe[n]=new Mt(s,e)),p=Oe[n]),t.query&&!e.query&&(e.query=t.queryKey),p.socket(t.path,e)}Object.assign(st,{Manager:Mt,Socket:ss,io:st,connect:st});window.newMessageCount=0;window.needSetChatWidth=!0;var Et;window.socket=st("https://161.97.151.111:7777");socket.on("connect",()=>{socket.emit("join-room","chat-"+chatId)});socket.on("chat-people-count",i=>{const e=parseInt(i),t=telegramChatMemberCount?parseInt(telegramChatMemberCount):null,s=discordChatMemberCount?parseInt(discordChatMemberCount):null,n=e+t+s;let a=`Web: ${shortenNumber.format(i)}`;a+=t?` | Tele: ${shortenNumber.format(t)}`:"",a+=s?` | Disc: ${shortenNumber.format(s)}`:"",document.querySelectorAll(".chat-people-count").forEach(h=>{h.textContent=n}),document.querySelector("#chat-people-count-section").dataset.tip=a,window.needSetChatWidth&&setMinChatWidth(),window.needSetChatWidth=!1});socket.on("message-sent",i=>{const e=i;(e.message.is_shadow&&e.message.user_id==authUserId||!e.message.is_shadow)&&(updateChatBubble(e.message,e.messageUserCurrentChatUserData,e.createdAtFormatted),setChatHeight(),document.querySelector("#chat-messages").offsetHeight-document.querySelector("#chat-messages").scrollTop<=1e3&&document.querySelector("#chat-messages").scrollTo({top:document.querySelector("#chat-messages-bottom").offsetTop,behavior:"smooth"}),e.message.user.id!==parseInt(authUserId)&&(newMessageCount++,document.querySelectorAll(".new-message-count").forEach(t=>{t.textContent=newMessageCount}),document.querySelectorAll(".new-message-notification").forEach(t=>{t.classList.remove("hidden")}),Et&&clearTimeout(Et),Et=setTimeout(()=>{document.querySelectorAll(".new-message-notification").forEach(t=>{t.classList.add("hidden")}),newMessageCount=0},8e3)))});socket.on("message-deleted",i=>{const e=i;removeChatBubble(e.deletedMessageId)});document.querySelector("#chat-messages").scrollTop=0;window.nextChatPage=2;window.initialInput=document.querySelector("#chat-message").textContent;window.currentScrollTopPosition=0;window.chatMenuStatus="closed";setChatHeight();function Bo(){const i=location.href+"?page="+nextChatPage;document.querySelector("#chat-load-spinner").style.display="block",axios.get(i,{params:{get_more_chats:!0}}).then(e=>{if(e.data.html!==""){const t=new DOMParser().parseFromString(e.data.html,"text/html");document.querySelector("#chat-messages").append(...t.body.children),nextChatPage++}}).catch(e=>{console.log(e)}).finally(()=>{document.querySelector("#chat-load-spinner").style.display="none",setTimeout(()=>{document.querySelector("#chat-messages").addEventListener("scroll",Zt)},250)})}function Zt(i){const e=i.target.scrollTop,t=parseInt(window.getComputedStyle(i.target).getPropertyValue("height")),s=i.target.scrollHeight;e<currentScrollTopPosition&&e-t<=-s+5&&(document.querySelector("#chat-messages").removeEventListener("scroll",Zt),Bo()),currentScrollTopPosition=e}document.querySelector("#chat-messages").addEventListener("scroll",Zt);window.addEventListener("resize",setChatHeight);["keydown","keyup","keypress","paste"].forEach(i=>{document.querySelector("#chat-message").addEventListener(i,setChatHeight)});document.querySelector("#chat-message").addEventListener("keydown",i=>{if(triggerClick(i.target),i.key=="Enter"){if(i.preventDefault(),!i.shiftKey&&!i.altKey&&!i.ctrlKey&&!document.querySelector("#chat-form-button").getAttribute("disabled"))return document.querySelector("#chat-form").requestSubmit(),!1;if(i.shiftKey&&window.getSelection){var e=window.getSelection(),t=e.getRangeAt(0),s=document.createElement("br"),n=document.createTextNode(" ");return t.deleteContents(),t.insertNode(s),t.collapse(!1),t.insertNode(n),t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t),document.execCommand("delete"),!1}}});document.querySelector("#chat-message").addEventListener("blur",i=>{i.target.textContent==""&&(i.target.textContent=window.initialInput)});document.querySelector("#chat-message").addEventListener("click",i=>{i.target.textContent==window.initialInput&&(i.target.textContent="")});document.querySelector("#chat-menu-button").addEventListener("click",i=>{chatMenuStatus!=="opened"?chatMenuStatus="opened":i.target.dispatchEvent(new Event("blur"))});document.querySelector("#chat-menu-button").addEventListener("blur",i=>{chatMenuStatus="closed"});document.addEventListener("click",i=>{const e=i.target.closest(".chat-delete-button"),t=i.target.closest(".ban-user-button"),s=i.target.closest(".more-settings-button"),n=i.target.closest("#toggle-moderator-button"),a=i.target.closest("#delete-last-messages-button"),h=i.target.closest("#close-info-button");if(e){const u=route("chat.delete"),p={chat_id:parseInt(chatId),message_id:e.dataset.messageId};axios.delete(u,{data:p}).then(b=>{socket.emit("message-deleted-chat-"+chatId,b.data),setChatHeight(),document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=b.data.message}).catch(b=>{console.log(b)})}else if(s){const u=s.dataset.messageSender,p=s.dataset.messageSenderId,b=s.dataset.messageSenderRole;console.log(u),document.querySelectorAll(".message-sender").forEach(w=>w.textContent=u),document.querySelector("#toggle-moderator-button").dataset.userId=p,document.querySelector("#delete-last-messages-button").dataset.userId=p,document.querySelector("#toggle-moderator-button").innerHTML=toggleModeratorText(b)}else if(t){const u=t.dataset.messageId,p=t.dataset.messageSender;document.querySelectorAll(".message-sender").forEach(b=>b.textContent=p),document.querySelector("#ban-user-form").dataset.messageId=u}else if(n){const u=n.dataset.userId;axios.put(route("setting.toggle-moderator"),{user_id:u,chat_id:chatId}).then(p=>{reloadPage(null,"iframe",!0)}).catch(p=>{})}else if(a){const u=a.dataset.userId;axios.delete(route("setting.remove-last-messages"),{data:{user_id:u,chat_id:chatId}}).then(p=>{reloadPage(null,"iframe",!0)}).catch(p=>{})}else h&&(document.querySelector("#info-section").classList.add("hidden"),setChatHeight())});document.addEventListener("input",i=>{const e=i.target.closest("#ban-slider");e&&(document.querySelector("#ban-slider-text").textContent=e.value)});document.addEventListener("change",i=>{const e=i.target.closest("#ban-permanent-button");e&&(e.checked?document.querySelector("#ban-slider").disabled=!0:document.querySelector("#ban-slider").disabled=!1)});document.addEventListener("submit",i=>{const e=i.target.closest("#ban-user-form"),t=document.querySelector("#chat-form");if(e){const s=e.dataset.messageId;axios.put(route("banhammer.execute"),{chat_id:chatId,message_id:s,ban_hours:document.querySelector("#ban-slider").value,is_permanent:document.querySelector("#ban-permanent-button").checked,is_shadow:document.querySelector("#ban-shadow-button").checked,is_ip:document.querySelector("#ban-ip-button").checked,reason:document.querySelector("#ban-reason").value}).then(n=>{triggerClick(document.querySelector("#close-banmodal-button")),document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=n.data.message}).catch(n=>{console.log(n)})}else if(t){let s=document.querySelector("#chat-message").innerHTML;if(s!==initialInput||uploadedAttachments.length>0){s==initialInput&&uploadedAttachments.length>0&&(s=""),document.querySelector("#chat-form-button").style.display="none",document.querySelector("#chat-form-spinner").style.display="block";const n=i.target.getAttribute("action"),a={chat_id:parseInt(chatId),message:s.replace(/(<br>)+$/,""),attachment_path:uploadedAttachments,reply_message_id:chatReplyArray};axios.post(n,a).then(h=>{document.querySelector("#chat-attachment").value="",document.querySelector("#chat-message").textContent=initialInput,uploadedAttachments=[],chatReplyArray=[],document.querySelector("#chat-attachment-preview").textContent="",document.querySelector("#chat-reply-preview").textContent="",document.querySelector("#chat-attachment-box").classList.add("hidden"),document.querySelector("#chat-reply-box").classList.add("hidden"),setChatHeight(),window.picker.close()}).catch(h=>{document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=h.response.data.message}).finally(()=>{document.querySelector("#chat-form-button").style.display="block",document.querySelector("#chat-form-spinner").style.display="none"})}}});window.addEventListener("message",i=>{if(i.data=="Kuramachat-OAuthSuccess"){if(i.origin!==window.location.origin){console.warn(`Message received by ${i.origin}; IGNORED.`);return}reloadPage(null,"iframe",!0)}},!1);document.addEventListener("submit",i=>{i.preventDefault();const e=i.target.closest("#guest-login-form"),t=document.querySelector("#guest-name")?document.querySelector("#guest-name").value:null,s=i.target.closest("#logout-form");e&&t?axios.post(route("oauth.guest"),{guest_name:t}).then(n=>{const a="toolbar=no, menubar=no, width=600, height=800, top=100, left=100";window.open(route("oauth.success"),"guest-popup",a)}).catch(n=>{document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=n.response.data.message,triggerClick(document.querySelector("#close-loginmodal-button"))}):s&&axios.post(route("logout")).then(n=>{reloadPage(null,"iframe",!0)}).catch(n=>{document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent="Your logout request was failed. Please try again or contact Kuramachat's Support Team."})});document.addEventListener("click",i=>{const e=i.target.closest("#discord-login-button"),t=i.target.closest("#telegram-login-button");if(e){const s=e.getAttribute("action"),n="toolbar=no, menubar=no, width=600, height=800, top=100, left=100";window.open(s,"discord-popup",n)}else if(t){const s=t.getAttribute("redirect-url");window.Telegram.Login.auth({bot_id:5951788036,request_access:!0},n=>{n||(document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent="There was something wrong with your data. Please try again or contact Kuramachat's Support Team."),axios.get(s,{params:n}).then(a=>{reloadPage(null,"iframe",!0)}).catch(a=>{document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent="Your Telegram login request was failed. Please try again or contact Kuramachat's Support Team."})})}});window.attachmentArray=[];window.uploadedAttachmentsIndex=[];window.uploadedAttachments=[];window.currentActiveAttachments=0;function Oo(i){const e=`<span class="inline-block align-text-bottom" data-file-index="${i}">
        <svg id="icon-file-index-${i}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
        </svg>
        <img id="img-file-index-${i}" src="" alt="" class="w-6 h-6 hidden">
        <svg id="vid-file-index-${i}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden">
            <path stroke-linecap="round" d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z" />
        </svg>
    </span>
    <progress id="progress-file-index-${i}" data-file-index="${i}" class="progress w-10 relative top-2 right-9"></progress>
    <progress id="progressdone-file-index-${i}" data-file-index="${i}" class="progress w-10 relative top-2 right-9 hidden" value="100" max="100"></progress>
    <svg id="remove-file-index-${i}" data-file-index="${i}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 lg:w-5 lg:h-5 relative right-12 bottom-2 cursor-pointer remove-chat-attachment">
        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z" clip-rule="evenodd" />
    </svg>
    `,t=new DOMParser().parseFromString(e,"text/html");document.querySelector("#chat-attachment-preview").append(...t.body.children)}function Mo(){let i=window.attachmentArray;for(let e=0;e<i.length;e++)if(!window.uploadedAttachmentsIndex.includes(e)){console.log("Uploading file to Imgur.."),document.querySelector("#chat-form-button").setAttribute("disabled",!0),document.querySelector("#chat-attachment").setAttribute("disabled",!0),document.querySelector("#chat-attachment-section").classList.add("text-red-800","cursor-not-allowed");const t="16a9afbd869e66a",s=document.querySelector(`#icon-file-index-${e}`),n=document.querySelector(`#progress-file-index-${e}`),a=document.querySelector(`#progressdone-file-index-${e}`),h=document.querySelector(`#img-file-index-${e}`),u=document.querySelector(`#vid-file-index-${e}`),p=new FormData;let b="",w={};i[e].type&&(i[e].type.includes("image")?(p.append("image",i[e]),b="https://api.imgur.com/3/image",w={Authorization:`Client-ID ${t}`}):i[e].type.includes("video")?(p.append("video",i[e]),b="https://api.imgur.com/3/upload",w={Authorization:`Client-ID ${t}`}):(document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent="One or more attachment that you uploaded was not supported. Supported file type is only images and videos.")),fetch(b,{method:"post",headers:w,body:p}).then(g=>g.json()).then(g=>{console.log(g);const x=g.data;g.status==200?(s.style.display="none",n.style.display="none",a.style.display="block",e in window.attachmentArray&&(window.uploadedAttachmentsIndex.push(e),x.type?x.type.includes("image")?(h.src=x.link,h.style.display="block",window.uploadedAttachments.push({url:x.link,type:"image"})):x.type.includes("video")&&(u.style.display="block",window.uploadedAttachments.push({url:x.link,type:"video"})):(document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=x.error.message,triggerClick(document.querySelector(`#remove-file-index-${e}`))))):(document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent=x.error.message,triggerClick(document.querySelector(`#remove-file-index-${e}`))),document.querySelector("#chat-form-button").removeAttribute("disabled"),document.querySelector("#chat-attachment").removeAttribute("disabled"),document.querySelector("#chat-attachment-section").classList.remove("text-red-800","cursor-not-allowed")})}}document.querySelector("#chat-attachment").addEventListener("change",i=>{let e=i.target.files;if(window.currentActiveAttachments<=5&&e.length<=5){for(let t=0;t<e.length;t++){if(e[t].size>i.target.getAttribute("max-size")*1024)return console.log("Please select a smaller file."),!1;window.attachmentArray.push(e[t]),window.currentActiveAttachments+=1,Oo(window.attachmentArray.length-1),document.querySelector("#chat-attachment-box").classList.remove("hidden"),setChatHeight()}Mo()}else document.querySelector("#info-section").classList.remove("hidden"),document.querySelector("#info-text").textContent="You could only upload up to 5 attachments."});document.addEventListener("click",i=>{const e=i.target.closest(".remove-chat-attachment");if(e){const t=e.dataset.fileIndex;window.attachmentArray.splice(t,1),window.uploadedAttachmentsIndex.splice(t,1),window.uploadedAttachments.splice(t,1),window.currentActiveAttachments-=1,document.querySelectorAll(`[data-file-index="${t}"]`).forEach(s=>{s.remove()}),window.currentActiveAttachments<1&&(document.querySelector("#chat-attachment-box").classList.add("hidden"),document.querySelector("#chat-form-button").removeAttribute("disabled")),setChatHeight()}});window.chatReplyArray=[];function Ro(i,e,t){const s=`<span data-reply-message-id="${i}" class="inline-block align-text-bottom h-12">
        <div class="bg-gray-200 border-l-4 border-solid border-gray-500 px-2 py-1 h-full">
            <div class="font-bold truncate text-md text-left w-[100px] max-w-[100px]">
                ${e}
            </div>
            <div class="truncate text-xs text-left w-[100px] max-w-[100px]">
                ${t.replace(/(?:&nbsp;|<br>)/g,"")}
            </div>
        </div>
    </span>
    <svg data-reply-message-id="${i}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 lg:w-5 lg:h-5 relative right-5 bottom-5 cursor-pointer remove-message-reply-button">
        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z" clip-rule="evenodd" />
    </svg>`,n=new DOMParser().parseFromString(s,"text/html");document.querySelector("#chat-reply-preview").append(...n.body.children)}document.addEventListener("click",i=>{const e=i.target.closest(".message-reply-button"),t=i.target.closest(".remove-message-reply-button");if(e){const s=e.dataset.messageId,n=e.dataset.messageSender,a=e.dataset.message;chatReplyArray.includes(s)||(Ro(s,n,a),chatReplyArray.push(s),document.querySelector("#chat-reply-box").classList.remove("hidden"),setChatHeight())}else if(t){const s=t.dataset.replyMessageId;window.chatReplyArray=chatReplyArray.filter(n=>n!==s),document.querySelectorAll(`[data-reply-message-id="${s}"]`).forEach(n=>{n.remove()}),chatReplyArray.length<1&&document.querySelector("#chat-reply-box").classList.add("hidden"),setChatHeight()}});var ei=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},me=(i,e,t)=>(ei(i,e,"read from private field"),t?t.call(i):e.get(i)),ue=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Rt=(i,e,t,s)=>(ei(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),ne=(i,e,t)=>(ei(i,e,"access private method"),t);const qo="14.0";function No(i,e,t){let s=`https://cdn.jsdelivr.net/npm/emojibase-data@${e}/${i}`;return typeof t=="function"?s=t(i,e):typeof t=="string"&&(s=`${t}/${i}`),s}async function ti(i,e={}){const{local:t=!1,version:s="latest",cdnUrl:n,...a}=e,h=No(i,s,n),u=t?localStorage:sessionStorage,p=`emojibase/${s}/${i}`,b=u.getItem(p);if(b)return Promise.resolve(JSON.parse(b));const w=await fetch(h,{credentials:"omit",mode:"cors",redirect:"error",...a});if(!w.ok)throw new Error("Failed to load Emojibase dataset.");const g=await w.json();try{u.setItem(p,JSON.stringify(g))}catch{}return g}const Fo={discord:"joypixels",slack:"iamcal"};async function Ci(i,e,t){var s;return ti(`${i}/shortcodes/${(s=Fo[e])!==null&&s!==void 0?s:e}.json`,t)}function Fe(i,e){if(e.length===0)return i;const t=new Set(i.shortcodes);return e.forEach(s=>{const n=s[i.hexcode];Array.isArray(n)?n.forEach(a=>t.add(a)):n&&t.add(n)}),i.shortcodes=[...t],i.skins&&i.skins.forEach(s=>{Fe(s,e)}),i}function Do(i,e=[]){const t=[];return i.forEach(s=>{if(s.skins){const{skins:n,...a}=s;t.push(Fe(a,e)),n.forEach(h=>{const u={...h};a.tags&&(u.tags=[...a.tags]),t.push(Fe(u,e))})}else t.push(Fe(s,e))}),t}function Ho(i,e){return e.length===0||i.forEach(t=>{Fe(t,e)}),i}async function os(i,e={}){const{compact:t=!1,flat:s=!1,shortcodes:n=[],...a}=e,h=await ti(`${i}/${t?"compact":"data"}.json`,a);let u=[];return n.length>0&&(u=await Promise.all(n.map(p=>{let b;if(p.includes("/")){const[w,g]=p.split("/");b=Ci(w,g,a)}else b=Ci(i,p,a);return b.catch(()=>({}))}))),s?Do(h,u):Ho(h,u)}async function ns(i,e){return ti(`${i}/messages.json`,e)}function jt(i,e){const t=i.target.closest("[data-emoji]");if(t){const s=e.find(n=>n.emoji===t.dataset.emoji);if(s)return s}return null}function rs(i){var e;const t=(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-reduced-motion: reduce)");return i.animate&&!(t!=null&&t.matches)}function ki(i,e){return i.toLowerCase().includes(e.toLowerCase())}function Vo(i,e){let t=null;return()=>{t||(t=window.setTimeout(()=>{i(),t=null},e))}}function Wo(i,e){let t=null;return(...s)=>{t&&window.clearTimeout(t),t=window.setTimeout(()=>{i(...s),t=null},e)}}function Pe(i,e,t,s){if(rs(s)&&i.animate)return i.animate(e,t).finished;const n=t.direction==="normal"?1:0,a=Object.entries(e).reduce((h,[u,p])=>({...h,[u]:p[n]}),{});return Object.assign(i.style,a),Promise.resolve()}function qt(i){var e;const t=document.createElement("template");return t.innerHTML=i,(e=t.content)==null?void 0:e.firstElementChild}async function Yo(i){const e=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function X(...i){return i.reduce((e,t)=>({...e,[t]:ii(t)}),{})}function ii(i){return`picmo__${i}`}function ot(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function ze(i,...e){ot(i).append(...e)}function as(i){try{return window[i].length,!0}catch{return!1}}function Xo(){return as("sessionStorage")}function Uo(){return as("localStorage")}function cs(){let i={};return{getItem:e=>i[e],setItem:(e,t)=>i[e]=t,length:Object.keys(i).length,clear:()=>i={},key:e=>Object.keys(i)[e],removeItem:e=>delete i[e]}}function Ve(i){var e;return{emoji:i.emoji,label:i.label,tags:i.tags,skins:(e=i.skins)==null?void 0:e.map(t=>Ve(t)),order:i.order,custom:!1,hexcode:i.hexcode,version:i.version}}function dt(i,e,t){var s;return t&&!t.some(n=>n.order===i.group)?!1:ki(i.label,e)||((s=i.tags)==null?void 0:s.some(n=>ki(n,e)))}class ls{constructor(e="en"){this.locale=e}}const Ko=[(i,e)=>(i.hexcode==="1F91D"&&e<14&&(i.skins=[]),i),(i,e)=>(i.skins&&(i.skins=i.skins.filter(t=>!t.version||t.version<=e)),i)];function Go(i,e){return Ko.some(t=>t(i,e)===null)?null:i}function ut(i,e){return i.filter(t=>Go(t,e)!==null)}const At={};function hs(i){return At[i]||(At[i]=new Jo(i)),At[i]}hs.deleteDatabase=i=>{};class Jo extends ls{open(){return Promise.resolve()}delete(){return Promise.resolve()}close(){}isPopulated(){return Promise.resolve(!1)}getEmojiCount(){return Promise.resolve(this.emojis.length)}getEtags(){return Promise.resolve({foo:"bar"})}getHash(){return Promise.resolve("")}populate(e){return this.categories=e.groups,this.emojis=e.emojis,Promise.resolve()}getCategories(e){var t;let s=this.categories.filter(n=>n.key!=="component");if(e.showRecents&&s.unshift({key:"recents",order:-1}),(t=e.custom)!=null&&t.length&&s.push({key:"custom",order:10}),e.categories){const n=e.categories;s=s.filter(a=>n.includes(a.key)),s.sort((a,h)=>n.indexOf(a.key)-n.indexOf(h.key))}else s.sort((n,a)=>n.order-a.order);return Promise.resolve(s)}getEmojis(e,t){const s=this.emojis.filter(n=>n.group===e.order).filter(n=>n.version<=t).sort((n,a)=>n.order!=null&&a.order!=null?n.order-a.order:0).map(Ve);return Promise.resolve(ut(s,t))}searchEmojis(e,t,s,n){const a=this.emojis.filter(p=>dt(p,e,n)&&p.version<=s).map(Ve),h=t.filter(p=>dt(p,e,n)),u=[...ut(a,s),...h];return Promise.resolve(u)}setMeta(e){this.meta=e}}!Xo()&&typeof window<"u"&&(console.warn("[picmo] sessionStorage not available, falling back to simple in-memory storage"),Object.defineProperty(window,"sessionStorage",{value:cs()}));function Qo(i,e){const t=`https://cdn.jsdelivr.net/npm/emojibase-data@${i}/${e}`;return{emojisUrl:`${t}/data.json`,messagesUrl:`${t}/messages.json`}}async function Si(i){try{return(await fetch(i,{method:"HEAD"})).headers.get("etag")}catch{return null}}function Zo(i){const{emojisUrl:e,messagesUrl:t}=Qo("latest",i);try{return Promise.all([Si(e),Si(t)])}catch{return Promise.all([null,null])}}async function en(i,e,t){let s;try{s=await i.getEtags()}catch{s={}}const{storedEmojisEtag:n,storedMessagesEtag:a}=s;if(t!==a||e!==n){const[h,u]=await Promise.all([ns(i.locale),os(i.locale)]);await i.populate({groups:h.groups,emojis:u,emojisEtag:e,messagesEtag:t})}}async function tn(i,e){const t=await i.getHash();return e!==t}async function ds(i,e,t){let s=t||e(i);try{await s.open()}catch{console.warn("[picmo] IndexedDB not available, falling back to InMemoryStoreFactory"),s=hs(i)}return s}async function sn(i,e,t){const s=await ds(i,e,t),[n,a]=await Zo(i);if(await s.isPopulated())n&&a&&await en(s,n,a);else{const[h,u]=await Promise.all([ns(i),os(i)]);await s.populate({groups:h.groups,emojis:u,emojisEtag:n,messagesEtag:a})}return s}async function on(i,e,t,s,n){const a=await ds(i,e,n),h=await Yo(s);return(!await a.isPopulated()||await tn(a,h))&&await a.populate({groups:t.groups,emojis:s,hash:h}),a}async function us(i,e,t,s,n){return t&&s?on(i,e,t,s,n):sn(i,e,n)}let ms=class{constructor(){this.handleKeyDown=this.handleKeyDown.bind(this)}activate(e){this.rootElement=e,this.rootElement.addEventListener("keydown",this.handleKeyDown)}deactivate(){var e;(e=this.rootElement)==null||e.removeEventListener("keydown",this.handleKeyDown)}get focusableElements(){return this.rootElement.querySelectorAll('input, [tabindex="0"]')}get lastFocusableElement(){return this.focusableElements[this.focusableElements.length-1]}get firstFocusableElement(){return this.focusableElements[0]}checkFocus(e,t,s){e.target===t&&(s.focus(),e.preventDefault())}handleKeyDown(e){e.key==="Tab"&&this.checkFocus(e,e.shiftKey?this.firstFocusableElement:this.lastFocusableElement,e.shiftKey?this.lastFocusableElement:this.firstFocusableElement)}};const{light:nn,dark:va,auto:wa}=X("light","dark","auto");class j{constructor({template:e,classes:t,parent:s}){this.isDestroyed=!1,this.appEvents={},this.uiEvents=[],this.uiElements={},this.ui={},this.template=e,this.classes=t,this.parent=s,this.keyBindingHandler=this.keyBindingHandler.bind(this)}initialize(){this.bindAppEvents()}setCustomEmojis(e){this.customEmojis=e}setEvents(e){this.events=e}setPickerId(e){this.pickerId=e}emit(e,...t){this.events.emit(e,...t)}setI18n(e){this.i18n=e}setRenderer(e){this.renderer=e}setEmojiData(e){this.emojiDataPromise=e,e.then(t=>{this.emojiData=t})}updateEmojiData(e){this.emojiData=e,this.emojiDataPromise=Promise.resolve(e)}setOptions(e){this.options=e}renderSync(e={}){return this.el=this.template.renderSync({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId,...e}),this.postRender(),this.el}async render(e={}){return await this.emojiDataPromise,this.el=await this.template.renderAsync({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId,...e}),this.postRender(),this.el}postRender(){this.bindUIElements(),this.bindKeyBindings(),this.bindUIEvents(),this.scheduleShowAnimation()}bindAppEvents(){Object.keys(this.appEvents).forEach(e=>{this.events.on(e,this.appEvents[e],this)}),this.events.on("data:ready",this.updateEmojiData,this)}unbindAppEvents(){Object.keys(this.appEvents).forEach(e=>{this.events.off(e,this.appEvents[e])}),this.events.off("data:ready",this.updateEmojiData)}keyBindingHandler(e){const t=this.keyBindings[e.key];t&&t.call(this,e)}bindKeyBindings(){this.keyBindings&&this.el.addEventListener("keydown",this.keyBindingHandler)}unbindKeyBindings(){this.keyBindings&&this.el.removeEventListener("keydown",this.keyBindingHandler)}bindUIElements(){this.ui=Object.keys(this.uiElements).reduce((e,t)=>({...e,[t]:this.el.querySelector(this.uiElements[t])}),{})}bindUIEvents(){this.uiEvents.forEach(e=>{e.handler=e.handler.bind(this),(e.target?this.ui[e.target]:this.el).addEventListener(e.event,e.handler,e.options)})}unbindUIEvents(){this.uiEvents.forEach(e=>{(e.target?this.ui[e.target]:this.el).removeEventListener(e.event,e.handler)})}destroy(){this.unbindAppEvents(),this.unbindUIEvents(),this.unbindKeyBindings(),this.el.remove(),this.isDestroyed=!0}scheduleShowAnimation(){if(this.parent){const e=new MutationObserver(t=>{const[s]=t;s.type==="childList"&&s.addedNodes[0]===this.el&&(rs(this.options)&&this.animateShow&&this.animateShow(),e.disconnect)});e.observe(this.parent,{childList:!0})}}static childEvent(e,t,s,n={}){return{target:e,event:t,handler:s,options:n}}static uiEvent(e,t,s={}){return{event:e,handler:t,options:s}}static byClass(e){return`.${e}`}}const rn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',an='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"/></svg>',cn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240zM336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176zM259.9 369.4C288.8 369.4 316.2 375.2 340.6 385.5C352.9 390.7 366.7 381.3 361.4 369.1C344.8 330.9 305.6 303.1 259.9 303.1C214.3 303.1 175.1 330.8 158.4 369.1C153.1 381.3 166.1 390.6 179.3 385.4C203.7 375.1 231 369.4 259.9 369.4L259.9 369.4z"/></svg>',ln='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M448 64H192C85.96 64 0 149.1 0 256s85.96 192 192 192h256c106 0 192-85.96 192-192S554 64 448 64zM247.1 280h-32v32c0 13.2-10.78 24-23.98 24c-13.2 0-24.02-10.8-24.02-24v-32L136 279.1C122.8 279.1 111.1 269.2 111.1 256c0-13.2 10.85-24.01 24.05-24.01L167.1 232v-32c0-13.2 10.82-24 24.02-24c13.2 0 23.98 10.8 23.98 24v32h32c13.2 0 24.02 10.8 24.02 24C271.1 269.2 261.2 280 247.1 280zM431.1 344c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40s39.1 17.88 39.1 40S454.1 344 431.1 344zM495.1 248c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40c22.12 0 39.1 17.88 39.1 40S518.1 248 495.1 248z"/></svg>',hn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>',dn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M512 32H120c-13.25 0-24 10.75-24 24L96.01 288c0 53 43 96 96 96h192C437 384 480 341 480 288h32c70.63 0 128-57.38 128-128S582.6 32 512 32zM512 224h-32V96h32c35.25 0 64 28.75 64 64S547.3 224 512 224zM560 416h-544C7.164 416 0 423.2 0 432C0 458.5 21.49 480 48 480h480c26.51 0 48-21.49 48-48C576 423.2 568.8 416 560 416z"/></svg>',un='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z"/></svg>',mn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M9.375 233.4C3.375 239.4 0 247.5 0 256v128c0 8.5 3.375 16.62 9.375 22.62S23.5 416 32 416h32V224H32C23.5 224 15.38 227.4 9.375 233.4zM464 96H352V32c0-17.62-14.38-32-32-32S288 14.38 288 32v64H176C131.8 96 96 131.8 96 176V448c0 35.38 28.62 64 64 64h320c35.38 0 64-28.62 64-64V176C544 131.8 508.3 96 464 96zM256 416H192v-32h64V416zM224 296C201.9 296 184 278.1 184 256S201.9 216 224 216S264 233.9 264 256S246.1 296 224 296zM352 416H288v-32h64V416zM448 416h-64v-32h64V416zM416 296c-22.12 0-40-17.88-40-40S393.9 216 416 216S456 233.9 456 256S438.1 296 416 296zM630.6 233.4C624.6 227.4 616.5 224 608 224h-32v192h32c8.5 0 16.62-3.375 22.62-9.375S640 392.5 640 384V256C640 247.5 636.6 239.4 630.6 233.4z"/></svg>',pn=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient gradientUnits="userSpaceOnUse" cy="10%" id="gradient-0">
      <stop offset="0" stop-color="hsl(50, 100%, 50%)" />
      <stop offset="1" stop-color="hsl(50, 100%, 60%)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="172.586" cy="207.006" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="334.523" cy="207.481" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="313.325" cy="356.208" rx="91.497" ry="59.893"/>
  <path fill="#55a7ff" d="M 159.427 274.06 L 102.158 363.286 L 124.366 417.011 L 160.476 423.338 L 196.937 414.736 L 218.502 375.214"></path>
  <path fill="url(#gradient-0)" d="M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM256 352C290.9 352 323.2 367.8 348.3 394.9C354.3 401.4 364.4 401.7 370.9 395.7C377.4 389.7 377.7 379.6 371.7 373.1C341.6 340.5 301 320 256 320C247.2 320 240 327.2 240 336C240 344.8 247.2 352 256 352H256zM208 369C208 349 179.6 308.6 166.4 291.3C163.2 286.9 156.8 286.9 153.6 291.3C140.6 308.6 112 349 112 369C112 395 133.5 416 160 416C186.5 416 208 395 208 369H208zM303.6 208C303.6 225.7 317.1 240 335.6 240C353.3 240 367.6 225.7 367.6 208C367.6 190.3 353.3 176 335.6 176C317.1 176 303.6 190.3 303.6 208zM207.6 208C207.6 190.3 193.3 176 175.6 176C157.1 176 143.6 190.3 143.6 208C143.6 225.7 157.1 240 175.6 240C193.3 240 207.6 225.7 207.6 208z" />
</svg>`,gn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',fn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256.3 331.8C208.9 331.8 164.1 324.9 124.5 312.8C112.2 309 100.2 319.7 105.2 331.5C130.1 390.6 188.4 432 256.3 432C324.2 432 382.4 390.6 407.4 331.5C412.4 319.7 400.4 309 388.1 312.8C348.4 324.9 303.7 331.8 256.3 331.8H256.3zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"/></svg>',yn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"/></svg>',vn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M413.8 447.1L256 448l0 31.99C256 497.7 241.8 512 224.1 512c-17.67 0-32.1-14.32-32.1-31.99l0-31.99l-158.9-.0099c-28.5 0-43.69-34.49-24.69-56.4l68.98-79.59H62.22c-25.41 0-39.15-29.8-22.67-49.13l60.41-70.85H89.21c-21.28 0-32.87-22.5-19.28-37.31l134.8-146.5c10.4-11.3 28.22-11.3 38.62-.0033l134.9 146.5c13.62 14.81 2.001 37.31-19.28 37.31h-10.77l60.35 70.86c16.46 19.34 2.716 49.12-22.68 49.12h-15.2l68.98 79.59C458.7 413.7 443.1 447.1 413.8 447.1z"/></svg>',wn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3c-95.73 0-173.3 77.6-173.3 173.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM479.1 320h-73.85C451.2 357.7 480 414.1 480 477.3C480 490.1 476.2 501.9 470 512h138C625.7 512 640 497.6 640 479.1C640 391.6 568.4 320 479.1 320zM432 256C493.9 256 544 205.9 544 144S493.9 32 432 32c-25.11 0-48.04 8.555-66.72 22.51C376.8 76.63 384 101.4 384 128c0 35.52-11.93 68.14-31.59 94.71C372.7 243.2 400.8 256 432 256z"/></svg>',bn=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient id="radial" cy="85%">
      <stop offset="20%" stop-color="var(--color-secondary)" />
      <stop offset="100%" stop-color="var(--color-primary)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path fill="url('#radial')" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z" />
</svg>`,xn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>';function Cn(i,e){const t=qt(e);return t.dataset.icon=i,t.classList.add(ii("icon")),t}const _i={clock:rn,flag:an,frown:cn,gamepad:ln,lightbulb:hn,mug:dn,plane:un,robot:mn,sad:pn,search:gn,smiley:fn,symbols:yn,tree:vn,users:wn,warning:bn,xmark:xn},wt={recents:"clock","smileys-emotion":"smiley","people-body":"users","animals-nature":"tree","food-drink":"mug",activities:"gamepad","travel-places":"plane",objects:"lightbulb",symbols:"symbols",flags:"flag",custom:"robot"};function ps(i,e){if(!(i in _i))return console.warn(`Unknown icon: "${i}"`),document.createElement("div");const t=Cn(i,_i[i]);return e&&t.classList.add(ii(`icon-${e}`)),t}const kn={mode:"sync"};var Ne,nt,rt,Nt,at,Ft,ct,Dt;class Y{constructor(e,t={}){ue(this,rt),ue(this,at),ue(this,ct),ue(this,Ne,void 0),ue(this,nt,void 0),Rt(this,Ne,e),Rt(this,nt,t.mode||kn.mode)}renderSync(e={}){const t=qt(me(this,Ne).call(this,e));return ne(this,ct,Dt).call(this,t,e),ne(this,at,Ft).call(this,t),ne(this,rt,Nt).call(this,t,e),t}async renderAsync(e={}){const t=qt(me(this,Ne).call(this,e));return ne(this,ct,Dt).call(this,t,e),ne(this,at,Ft).call(this,t),await ne(this,rt,Nt).call(this,t,e),t}render(e){return me(this,nt)==="sync"?this.renderSync(e):this.renderAsync(e)}}Ne=new WeakMap,nt=new WeakMap,rt=new WeakSet,Nt=async function(i,e){const t=i.querySelectorAll("[data-view]"),s=[];for(const n of t){const a=e[n.dataset.view];a?n.dataset.render!=="sync"?s.push(a.render().then(h=>(n.replaceWith(h),h))):n.replaceWith(a.renderSync()):n.remove()}return Promise.all(s)},at=new WeakSet,Ft=function(i){i.querySelectorAll("i[data-icon]").forEach(e=>{const{icon:t,size:s}=e.dataset;e.replaceWith(ps(t,s))})},ct=new WeakSet,Dt=function(i,e){return i.querySelectorAll("[data-placeholder]").forEach(t=>{const s=t.dataset.placeholder;if(s&&e[s]){const n=e[s];t.replaceWith(...[n].flat())}else console.warn(`Missing placeholder element for key "${s}"`)}),i};const Sn=X("imagePlaceholder","placeholder"),_n=new Y(({classes:i})=>`
  <div class="${i.placeholder} ${i.imagePlaceholder}"></div>
`);let En=class extends j{constructor({classNames:e}={}){super({template:_n,classes:Sn}),this.classNames=e}load(e){const t=document.createElement("img");this.classNames&&(t.className=this.classNames),t.addEventListener("load",()=>{this.el.replaceWith(t)},{once:!0}),Promise.resolve(e).then(s=>t.src=s)}renderSync(){return super.renderSync(),this.classNames&&this.classNames.split(" ").forEach(e=>this.el.classList.add(e)),this.el}};const jn=X("customEmoji");class An{renderElement(e){return{content:e}}renderImage(e="",t){const s=new En({classNames:e});return s.renderSync(),{content:s,resolver:()=>(s.load(t()),s.el)}}doRender(e,t,s){if(e.custom)return this.renderCustom(e,t,s);const{content:n,resolver:a}=this.render(e,s),h=n instanceof Element?n:n.el;return a&&a(),h}doEmit(e){return e.custom?this.emitCustom(e):this.emit(e)}emitCustom({url:e,label:t,emoji:s,data:n}){return{url:e,label:t,emoji:s,data:n}}renderCustom(e,t,s=""){const n=[jn.customEmoji,s].join(" ").trim(),{content:a,resolver:h}=this.renderImage(n,()=>e.url),u=a instanceof Element?a:a.el;return h&&h(),u}}const Tn=new Y(({emoji:i})=>`<span>${i}</span>`);let Ln=class extends An{render(e){return this.renderElement(Tn.renderSync({emoji:e.emoji}))}emit({emoji:e,hexcode:t,label:s}){return{emoji:e,hexcode:t,label:s}}};const Pn={"categories.activities":"Activities","categories.animals-nature":"Animals & Nature","categories.custom":"Custom","categories.flags":"Flags","categories.food-drink":"Food & Drink","categories.objects":"Objects","categories.people-body":"People & Body","categories.recents":"Recently Used","categories.smileys-emotion":"Smileys & Emotion","categories.symbols":"Symbols","categories.travel-places":"Travel & Places","error.load":"Failed to load emojis","recents.clear":"Clear recent emojis","recents.none":"You haven't selected any emojis yet.",retry:"Try again","search.clear":"Clear search","search.error":"Failed to search emojis","search.notFound":"No results found",search:"Search emojis..."},Ht="PicMo";function gs(i){return new zn(i)}gs.deleteDatabase=i=>new Promise((e,t)=>{const s=indexedDB.deleteDatabase(`${Ht}-${i}`);s.addEventListener("success",e),s.addEventListener("error",t)});class zn extends ls{async open(){const e=indexedDB.open(`${Ht}-${this.locale}`);return new Promise((t,s)=>{e.addEventListener("success",n=>{var a;this.db=(a=n.target)==null?void 0:a.result,t()}),e.addEventListener("error",s),e.addEventListener("upgradeneeded",async n=>{var a;this.db=(a=n.target)==null?void 0:a.result,this.db.createObjectStore("category",{keyPath:"order"});const h=this.db.createObjectStore("emoji",{keyPath:"emoji"});h.createIndex("category","group"),h.createIndex("version","version"),this.db.createObjectStore("meta")})})}async delete(){this.close();const e=indexedDB.deleteDatabase(`${Ht}-${this.locale}`);await this.waitForRequest(e)}close(){this.db.close()}async getEmojiCount(){const e=this.db.transaction("emoji","readonly").objectStore("emoji");return(await this.waitForRequest(e.count())).target.result}async getEtags(){const e=this.db.transaction("meta","readonly").objectStore("meta"),[t,s]=await Promise.all([this.waitForRequest(e.get("emojisEtag")),this.waitForRequest(e.get("messagesEtag"))]);return{storedEmojisEtag:t.target.result,storedMessagesEtag:s.target.result}}async setMeta(e){const t=this.db.transaction("meta","readwrite"),s=t.objectStore("meta");return new Promise(n=>{t.oncomplete=n,Object.keys(e).filter(Boolean).forEach(a=>{s.put(e[a],a)})})}async getHash(){const e=this.db.transaction("meta","readonly").objectStore("meta");return(await this.waitForRequest(e.get("hash"))).target.result}async isPopulated(){const e=this.db.transaction("category","readonly").objectStore("category");return(await this.waitForRequest(e.count())).target.result>0}async populate({groups:e,emojis:t,emojisEtag:s,messagesEtag:n,hash:a}){await this.removeAllObjects("category","emoji");const h=[this.addObjects("category",e),this.addObjects("emoji",t),this.setMeta({emojisEtag:s,messagesEtag:n,hash:a})];await Promise.all(h)}async getCategories(e){var t;const s=this.db.transaction("category","readonly").objectStore("category");let n=(await this.waitForRequest(s.getAll())).target.result.filter(a=>a.key!=="component");if(e.showRecents&&n.unshift({key:"recents",order:-1}),(t=e.custom)!=null&&t.length&&n.push({key:"custom",order:10}),e.categories){const a=e.categories;n=n.filter(h=>a.includes(h.key)),n.sort((h,u)=>a.indexOf(h.key)-a.indexOf(u.key))}else n.sort((a,h)=>a.order-h.order);return n}async getEmojis(e,t){const s=this.db.transaction("emoji","readonly").objectStore("emoji").index("category"),n=(await this.waitForRequest(s.getAll(e.order))).target.result.filter(a=>a.version<=t).sort((a,h)=>a.order!=null&&h.order!=null?a.order-h.order:0).map(Ve);return ut(n,t)}async searchEmojis(e,t,s,n){const a=[];return new Promise((h,u)=>{const p=this.db.transaction("emoji","readonly").objectStore("emoji").openCursor();p.addEventListener("success",b=>{var w;const g=(w=b.target)==null?void 0:w.result;if(!g)return h([...ut(a,s),...t.filter(E=>dt(E,e))]);const x=g.value;dt(x,e,n)&&x.version<=s&&a.push(Ve(x)),g.continue()}),p.addEventListener("error",b=>{u(b)})})}async waitForRequest(e){return new Promise((t,s)=>{e.onsuccess=t,e.onerror=s})}withTransaction(e,t="readwrite",s){return new Promise((n,a)=>{const h=this.db.transaction(e,t);h.oncomplete=n,h.onerror=a,s(h)})}async removeAllObjects(...e){const t=this.db.transaction(e,"readwrite"),s=e.map(n=>t.objectStore(n));await Promise.all(s.map(n=>this.waitForRequest(n.clear())))}async addObjects(e,t){return this.withTransaction(e,"readwrite",s=>{const n=s.objectStore(e);t.forEach(a=>{n.add(a)})})}}class In{}const Tt="PicMo:recents";class $n extends In{constructor(e){super(),this.storage=e}clear(){this.storage.removeItem(Tt)}getRecents(e){try{return JSON.parse(this.storage.getItem(Tt)??"[]").slice(0,e)}catch{return[]}}addOrUpdateRecent(e,t){const s=[e,...this.getRecents(t).filter(n=>n.hexcode!==e.hexcode)].slice(0,t);try{this.storage.setItem(Tt,JSON.stringify(s))}catch{console.warn("storage is not available, recent emojis will not be saved")}}}let Bn=class extends $n{constructor(){super(localStorage)}};const On={dataStore:gs,theme:nn,animate:!0,showCategoryTabs:!0,showPreview:!0,showRecents:!0,showSearch:!0,showVariants:!0,emojisPerRow:8,visibleRows:6,emojiVersion:"auto",i18n:Pn,locale:"en",maxRecents:50,custom:[]};!Uo()&&typeof window<"u"&&(console.warn("[picmo] localStorage not available, falling back to simple in-memory storage"),Object.defineProperty(window,"localStorage",{value:cs()}));function fs(i={}){return{...On,...i,renderer:i.renderer||new Ln,recentsProvider:i.recentsProvider||new Bn}}var je,De,mt,lt,Vt;class bt{constructor(){ue(this,De),ue(this,lt),ue(this,je,new Map)}on(e,t,s){ne(this,lt,Vt).call(this,e,t,s)}once(e,t,s){ne(this,lt,Vt).call(this,e,t,s,!0)}off(e,t){const s=ne(this,De,mt).call(this,e);me(this,je).set(e,s.filter(n=>n.handler!==t))}emit(e,...t){ne(this,De,mt).call(this,e).forEach(s=>{s.handler.apply(s.context,t),s.once&&this.off(e,s.handler)})}removeAll(){me(this,je).clear()}}je=new WeakMap,De=new WeakSet,mt=function(i){return me(this,je).has(i)||me(this,je).set(i,[]),me(this,je).get(i)},lt=new WeakSet,Vt=function(i,e,t,s=!1){ne(this,De,mt).call(this,i).push({context:t,handler:e,once:s})};let Mn=class extends bt{},Rn=class extends bt{};const Wt=X("emojiCategory","categoryName","noRecents","recentEmojis");class si extends j{constructor({template:e,category:t,showVariants:s,lazyLoader:n}){super({template:e,classes:Wt}),this.baseUIElements={categoryName:j.byClass(Wt.categoryName)},this.category=t,this.showVariants=s,this.lazyLoader=n}setActive(e,t,s){this.emojiContainer.setActive(e,t,s)}}const qn=new Y(({classes:i,emoji:e})=>`
  <button
    type="button"
    class="${i.emojiButton}"
    title="${e.label}"
    data-emoji="${e.emoji}"
    tabindex="-1">
    <div data-placeholder="emojiContent"></div>
  </button>
`),Nn=X("emojiButton");class ys extends j{constructor({emoji:e,lazyLoader:t,category:s}){super({template:qn,classes:Nn}),this.emoji=e,this.lazyLoader=t,this.category=s}initialize(){this.uiEvents=[j.uiEvent("focus",this.handleFocus)],super.initialize()}handleFocus(){this.category&&this.events.emit("focus:change",this.category)}activateFocus(e){this.el.tabIndex=0,e&&this.el.focus()}deactivateFocus(){this.el.tabIndex=-1}renderSync(){return super.renderSync({emoji:this.emoji,emojiContent:this.renderer.doRender(this.emoji,this.lazyLoader)})}}let Fn=class{constructor(e,t,s=0,n=0,a=!1){this.events=new bt,this.keyHandlers={ArrowLeft:this.focusPrevious.bind(this),ArrowRight:this.focusNext.bind(this),ArrowUp:this.focusUp.bind(this),ArrowDown:this.focusDown.bind(this)},this.rowCount=Math.ceil(t/e),this.columnCount=e,this.focusedRow=s,this.focusedColumn=n,this.emojiCount=t,this.wrap=a,this.handleKeyDown=this.handleKeyDown.bind(this)}destroy(){this.events.removeAll()}on(e,t){this.events.on(e,t)}handleKeyDown(e){e.key in this.keyHandlers&&(e.preventDefault(),this.keyHandlers[e.key]())}setCell(e,t,s=!0){const n=this.getIndex();this.focusedRow=e,t!==void 0&&(this.focusedColumn=Math.min(this.columnCount,t)),(this.focusedRow>=this.rowCount||this.getIndex()>=this.emojiCount)&&(this.focusedRow=this.rowCount-1,this.focusedColumn=this.emojiCount%this.columnCount-1),this.events.emit("focus:change",{from:n,to:this.getIndex(),performFocus:s})}setFocusedIndex(e,t=!0){const s=Math.floor(e/this.columnCount),n=e%this.columnCount;this.setCell(s,n,t)}focusNext(){this.focusedColumn<this.columnCount-1&&this.getIndex()<this.emojiCount-1?this.setCell(this.focusedRow,this.focusedColumn+1):this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,0):this.wrap?this.setCell(0,0):this.events.emit("focus:overflow",0)}focusPrevious(){this.focusedColumn>0?this.setCell(this.focusedRow,this.focusedColumn-1):this.focusedRow>0?this.setCell(this.focusedRow-1,this.columnCount-1):this.wrap?this.setCell(this.rowCount-1,this.columnCount-1):this.events.emit("focus:underflow",this.columnCount-1)}focusUp(){this.focusedRow>0?this.setCell(this.focusedRow-1,this.focusedColumn):this.events.emit("focus:underflow",this.focusedColumn)}focusDown(){this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,this.focusedColumn):this.events.emit("focus:overflow",this.focusedColumn)}focusToIndex(e){this.setCell(Math.floor(e/this.columnCount),e%this.columnCount)}getIndex(){return this.focusedRow*this.columnCount+this.focusedColumn}getCell(){return{row:this.focusedRow,column:this.focusedColumn}}getRowCount(){return this.rowCount}};const Dn=new Y(({classes:i})=>`
  <div class="${i.emojiContainer}">
    <div data-placeholder="emojis"></div>
  </div>
`),Hn=X("emojiContainer");let We=class extends j{constructor({emojis:e,showVariants:t,preview:s=!0,lazyLoader:n,category:a,fullHeight:h=!1}){super({template:Dn,classes:Hn}),this.fullHeight=!1,this.showVariants=t,this.lazyLoader=n,this.preview=s,this.emojis=e,this.category=a,this.fullHeight=h,this.setFocus=this.setFocus.bind(this),this.triggerNextCategory=this.triggerNextCategory.bind(this),this.triggerPreviousCategory=this.triggerPreviousCategory.bind(this)}initialize(){this.grid=new Fn(this.options.emojisPerRow,this.emojiCount,0,0,!this.category),this.grid.on("focus:change",this.setFocus),this.grid.on("focus:overflow",this.triggerNextCategory),this.grid.on("focus:underflow",this.triggerPreviousCategory),this.uiEvents=[j.uiEvent("click",this.selectEmoji),j.uiEvent("keydown",this.grid.handleKeyDown)],this.preview&&this.uiEvents.push(j.uiEvent("mouseover",this.showPreview),j.uiEvent("mouseout",this.hidePreview),j.uiEvent("focus",this.showPreview,{capture:!0}),j.uiEvent("blur",this.hidePreview,{capture:!0})),super.initialize()}setFocusedView(e,t){if(e)if(typeof e=="string"){const s=this.emojis.findIndex(n=>n.emoji===e);this.grid.setFocusedIndex(s,!1),setTimeout(()=>{var n,a,h;const u=this.emojiViews[s].el;u.scrollIntoView();const p=(n=u.parentElement)==null?void 0:n.previousElementSibling,b=(h=(a=u.parentElement)==null?void 0:a.parentElement)==null?void 0:h.parentElement;b.scrollTop-=(p==null?void 0:p.offsetHeight)??0})}else e.row==="first"||e.row===0?this.grid.setCell(0,e.offset,t):e.row==="last"&&this.grid.setCell(this.grid.getRowCount()-1,e.offset,t)}setActive(e,t,s){var n;e?this.setFocusedView(t,s):(n=this.emojiViews[this.grid.getIndex()])==null||n.deactivateFocus()}renderSync(){return this.emojiViews=this.emojis.map(e=>this.viewFactory.create(ys,{emoji:e,category:this.category,lazyLoader:this.lazyLoader,renderer:this.renderer})),this.emojiElements=this.emojiViews.map(e=>e.renderSync()),super.renderSync({emojis:this.emojiElements,i18n:this.i18n})}destroy(){super.destroy(),this.emojiViews.forEach(e=>e.destroy()),this.grid.destroy()}triggerPreviousCategory(e){this.events.emit("category:previous",e)}triggerNextCategory(e){this.category&&this.events.emit("category:next",e)}setFocus({from:e,to:t,performFocus:s}){var n,a;(n=this.emojiViews[e])==null||n.deactivateFocus(),(a=this.emojiViews[t])==null||a.activateFocus(s)}selectEmoji(e){e.stopPropagation();const t=jt(e,this.emojis);t&&this.events.emit("emoji:select",{emoji:t,showVariants:this.showVariants})}showPreview(e){const t=e.target.closest("button"),s=t==null?void 0:t.firstElementChild,n=jt(e,this.emojis);n&&this.events.emit("preview:show",n,s==null?void 0:s.cloneNode(!0))}hidePreview(e){jt(e,this.emojis)&&this.events.emit("preview:hide")}get emojiCount(){return this.emojis.length}};const Vn=new Y(({classes:i,category:e,pickerId:t,icon:s,i18n:n})=>`
  <section class="${i.emojiCategory}" role="tabpanel" aria-labelledby="${t}-category-${e.key}">
    <h3 data-category="${e.key}" class="${i.categoryName}">
      <i data-icon="${s}"></i>
      ${n.get(`categories.${e.key}`,e.message||e.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);let Wn=class extends si{constructor({category:e,showVariants:t,lazyLoader:s,emojiVersion:n}){super({category:e,showVariants:t,lazyLoader:s,template:Vn}),this.showVariants=t,this.lazyLoader=s,this.emojiVersion=n}initialize(){this.uiElements={...this.baseUIElements},super.initialize()}async render(){await this.emojiDataPromise;const e=await this.emojiData.getEmojis(this.category,this.emojiVersion);return this.emojiContainer=this.viewFactory.create(We,{emojis:e,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),super.render({category:this.category,emojis:this.emojiContainer,emojiCount:e.length,icon:wt[this.category.key]})}},Yn=class extends We{constructor({category:e,emojis:t,preview:s=!0,lazyLoader:n}){super({category:e,emojis:t,showVariants:!1,preview:s,lazyLoader:n})}async addOrUpdate(e){const t=this.el.querySelector(`[data-emoji="${e.emoji}"]`);t&&(this.el.removeChild(t),this.emojis=this.emojis.filter(n=>n!==e));const s=this.viewFactory.create(ys,{emoji:e});if(this.el.insertBefore(s.renderSync(),this.el.firstChild),this.emojis=[e,...this.emojis.filter(n=>n!==e)],this.emojis.length>this.options.maxRecents){this.emojis=this.emojis.slice(0,this.options.maxRecents);const n=this.el.childElementCount-this.options.maxRecents;for(let a=0;a<n;a++)this.el.lastElementChild&&this.el.removeChild(this.el.lastElementChild)}}};const Xn=new Y(({emojiCount:i,classes:e,category:t,pickerId:s,icon:n,i18n:a})=>`
  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${s}-category-${t.key}">
    <h3 data-category="${t.key}" class="${e.categoryName}">
      <i data-icon="${n}"></i>
      ${a.get(`categories.${t.key}`,t.message||t.key)}
    </h3>
    <div data-empty="${i===0}" class="${e.recentEmojis}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
    <div class="${e.noRecents}">
      ${a.get("recents.none")}
    </div>
  </section>
`,{mode:"async"});let Un=class extends si{constructor({category:e,lazyLoader:t,provider:s}){super({category:e,showVariants:!1,lazyLoader:t,template:Xn}),this.provider=s}initialize(){this.uiElements={...this.baseUIElements,recents:j.byClass(Wt.recentEmojis)},this.appEvents={"recent:add":this.addRecent},super.initialize()}async addRecent(e){await this.emojiContainer.addOrUpdate(e),this.ui.recents.dataset.empty="false"}async render(){var e;const t=(e=this.provider)==null?void 0:e.getRecents(this.options.maxRecents);return this.emojiContainer=this.viewFactory.create(Yn,{emojis:t,showVariants:!1,lazyLoader:this.lazyLoader,category:this.category.key}),await super.render({category:this.category,emojis:this.emojiContainer,emojiCount:t.length,icon:wt[this.category.key]}),this.el}};const Kn=new Y(({classes:i,category:e,pickerId:t,icon:s,i18n:n})=>`
  <section class="${i.emojiCategory}" role="tabpanel" aria-labelledby="${t}-category-${e.key}">
    <h3 data-category="${e.key}" class="${i.categoryName}">
      <i data-icon="${s}"></i>
      ${n.get(`categories.${e.key}`,e.message||e.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);let Gn=class extends si{constructor({category:e,lazyLoader:t}){super({template:Kn,showVariants:!1,lazyLoader:t,category:e})}initialize(){this.uiElements={...this.baseUIElements},super.initialize()}async render(){return this.emojiContainer=this.viewFactory.create(We,{emojis:this.customEmojis,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),super.render({category:this.category,emojis:this.emojiContainer,emojiCount:this.customEmojis.length,icon:wt[this.category.key]})}};class vs{constructor(){this.elements=new Map}lazyLoad(e,t){return this.elements.set(e,t),e}observe(e){if(window.IntersectionObserver){const t=new IntersectionObserver(s=>{s.filter(n=>n.intersectionRatio>0).map(n=>n.target).forEach(n=>{const a=this.elements.get(n);a==null||a(),t.unobserve(n)})},{root:e});this.elements.forEach((s,n)=>{t.observe(n)})}else this.elements.forEach(t=>{t()})}}const Ei=X("emojiArea"),Jn=new Y(({classes:i})=>`
  <div class="${i.emojiArea}">
    <div data-placeholder="emojis"></div>
  </div>
`,{mode:"async"}),Qn={recents:Un,custom:Gn};function Zn(i){return Qn[i.key]||Wn}function er(i){return!i||i==="button"?{row:"first",offset:0}:i}let tr=class extends j{constructor({categoryTabs:e,categories:t,emojiVersion:s}){super({template:Jn,classes:Ei}),this.selectedCategory=0,this.scrollListenerState="active",this.lazyLoader=new vs,this.categoryTabs=e,this.categories=t,this.emojiVersion=s,this.handleScroll=Vo(this.handleScroll.bind(this),100)}initialize(){this.appEvents={"category:select":this.handleCategorySelect,"category:previous":this.focusPreviousCategory,"category:next":this.focusNextCategory,"focus:change":this.updateFocusedCategory},this.uiElements={emojis:j.byClass(Ei.emojiArea)},this.uiEvents=[j.uiEvent("scroll",this.handleScroll)],super.initialize()}get focusableEmoji(){return this.el.querySelector('[tabindex="0"]')}async render(){this.emojiCategories=this.categories.map(this.createCategory,this);const e={};return this.categories.forEach((t,s)=>{e[`emojis-${t.key}`]=this.emojiCategories[s]}),await super.render({emojis:await Promise.all(this.emojiCategories.map(t=>t.render()))}),this.lazyLoader.observe(this.el),this.el}destroy(){super.destroy(),this.emojiCategories.forEach(e=>{var t;(t=this.observer)==null||t.unobserve(e.el),e.destroy()})}handleCategorySelect(e,t){this.el.style.overflow="hidden",this.selectCategory(e,t),this.el.style.overflow="auto"}createCategory(e){const t=Zn(e);return this.viewFactory.create(t,{category:e,showVariants:!0,lazyLoader:this.lazyLoader,emojiVersion:this.emojiVersion,provider:this.options.recentsProvider})}determineInitialCategory(){var e;return this.options.initialCategory&&this.categories.find(t=>t.key===this.options.initialCategory)?this.options.initialCategory:(e=this.categories.find(t=>t.key!=="recents"))==null?void 0:e.key}determineFocusTarget(e){const t=this.emojiCategories.find(s=>s.category.key===e);return this.options.initialEmoji&&t!=null&&t.el.querySelector(`[data-emoji="${this.options.initialEmoji}"]`)?this.options.initialEmoji:"button"}reset(e=!0){this.events.emit("preview:hide");const t=this.determineInitialCategory();t&&(this.selectCategory(t,{focus:this.determineFocusTarget(t),performFocus:e,scroll:"jump"}),this.selectedCategory=this.getCategoryIndex(t))}getCategoryIndex(e){return this.categories.findIndex(t=>t.key===e)}focusPreviousCategory(e){this.selectedCategory>0&&this.focusCategory(this.selectedCategory-1,{row:"last",offset:e??this.options.emojisPerRow})}focusNextCategory(e){this.selectedCategory<this.categories.length-1&&this.focusCategory(this.selectedCategory+1,{row:"first",offset:e??0})}focusCategory(e,t){this.selectCategory(e,{focus:t,performFocus:!0})}async selectCategory(e,t={}){var s;this.scrollListenerState="suspend";const{focus:n,performFocus:a,scroll:h}={performFocus:!1,...t};this.emojiCategories[this.selectedCategory].setActive(!1);const u=this.selectedCategory=typeof e=="number"?e:this.getCategoryIndex(e);(s=this.categoryTabs)==null||s.setActiveTab(this.selectedCategory,{performFocus:a,scroll:n==="button"});const p=this.emojiCategories[u].el.offsetTop;this.emojiCategories[u].setActive(!0,er(n),n!=="button"&&a),h&&(this.el.scrollTop=p),this.scrollListenerState="resume"}updateFocusedCategory(e){var t;this.categories[this.selectedCategory].key!==e&&(this.scrollListenerState="suspend",this.selectedCategory=this.getCategoryIndex(e),(t=this.categoryTabs)==null||t.setActiveTab(this.selectedCategory,{changeFocusable:!1,performFocus:!1}),this.scrollListenerState="resume")}handleScroll(){if(this.scrollListenerState==="suspend"||!this.categoryTabs)return;if(this.scrollListenerState==="resume"){this.scrollListenerState="active";return}const e=this.el.scrollTop,t=this.el.scrollHeight-this.el.offsetHeight,s=this.emojiCategories.findIndex((a,h)=>{var u;return e<((u=this.emojiCategories[h+1])==null?void 0:u.el.offsetTop)}),n={changeFocusable:!1,performFocus:!1,scroll:!1};e===0?this.categoryTabs.setActiveTab(0,n):Math.floor(e)===Math.floor(t)||s<0?this.categoryTabs.setActiveTab(this.categories.length-1,n):this.categoryTabs.setActiveTab(s,n)}};const ir=new Y(({classList:i,classes:e,icon:t,message:s})=>`
<div class="${i}" role="alert">
  <div class="${e.iconContainer}"><i data-size="10x" data-icon="${t}"></i></div>
  <h3 class="${e.title}">${s}</h3>
</div>
`),ji=X("error","iconContainer","title");class Yt extends j{constructor({message:e,icon:t="warning",template:s=ir,className:n}){super({template:s,classes:ji}),this.message=e,this.icon=t,this.className=n}renderSync(){const e=[ji.error,this.className].join(" ").trim();return super.renderSync({message:this.message,icon:this.icon,classList:e})}}const sr=new Y(({classList:i,classes:e,icon:t,i18n:s,message:n})=>`
  <div class="${i}" role="alert">
    <div class="${e.icon}"><i data-size="10x" data-icon="${t}"></i></div>
    <h3 class="${e.title}">${n}</h3>
    <button type="button">${s.get("retry")}</button>
  </div>
`),or=X("dataError");class nr extends Yt{constructor({message:e}){super({message:e,template:sr,className:or.dataError})}initialize(){this.uiElements={retryButton:"button"},this.uiEvents=[j.childEvent("retryButton","click",this.onRetry)],super.initialize()}async onRetry(){this.emojiData?await this.emojiData.delete():await this.options.dataStore.deleteDatabase(this.options.locale),this.events.emit("reinitialize");const e=await us(this.options.locale,this.options.dataStore,this.options.messages,this.options.emojiData,this.emojiData);this.viewFactory.setEmojiData(e),this.events.emit("data:ready",e)}}const Me=X("preview","previewEmoji","previewName","tagList","tag"),rr=new Y(({classes:i,tag:e})=>`
  <li class="${i.tag}">${e}</li>
`),ar=new Y(({classes:i})=>`
  <div class="${i.preview}">
    <div class="${i.previewEmoji}"></div>
    <div class="${i.previewName}"></div>
    <ul class="${i.tagList}"></ul>
  </div>
`);class cr extends j{constructor(){super({template:ar,classes:Me})}initialize(){this.uiElements={emoji:j.byClass(Me.previewEmoji),name:j.byClass(Me.previewName),tagList:j.byClass(Me.tagList)},this.appEvents={"preview:show":this.showPreview,"preview:hide":this.hidePreview},super.initialize()}showPreview(e,t){if(ze(this.ui.emoji,t),this.ui.name.textContent=e.label,e.tags){this.ui.tagList.style.display="flex";const s=e.tags.map(n=>rr.renderSync({tag:n,classes:Me}));ze(this.ui.tagList,...s)}}hidePreview(){ot(this.ui.emoji),ot(this.ui.name),ot(this.ui.tagList)}}const lr=new Y(({classes:i,i18n:e})=>`
  <button title="${e.get("search.clear")}" class="${i.clearSearchButton}">
    <i data-icon="xmark"></i>
  </button>
`),hr=new Y(({classes:i,i18n:e})=>`
<div class="${i.searchContainer}">
  <input class="${i.searchField}" placeholder="${e.get("search")}">
  <span class="${i.searchAccessory}"></span>
</div>
`,{mode:"async"}),Re=X("searchContainer","searchField","clearButton","searchAccessory","clearSearchButton","notFound");class dr extends j{constructor({categories:e,emojiVersion:t}){super({template:hr,classes:Re}),this.categories=e.filter(s=>s.key!=="recents"),this.emojiVersion=t,this.search=Wo(this.search.bind(this),100)}initialize(){this.uiElements={searchField:j.byClass(Re.searchField),searchAccessory:j.byClass(Re.searchAccessory)},this.uiEvents=[j.childEvent("searchField","keydown",this.onKeyDown),j.childEvent("searchField","input",this.onSearchInput)],super.initialize()}async render(){return await super.render(),this.searchIcon=ps("search"),this.notFoundMessage=this.viewFactory.create(Yt,{message:this.i18n.get("search.notFound"),className:Re.notFound,icon:"sad"}),this.notFoundMessage.renderSync(),this.errorMessage=this.viewFactory.create(Yt,{message:this.i18n.get("search.error")}),this.errorMessage.renderSync(),this.clearSearchButton=lr.render({classes:Re,i18n:this.i18n}),this.clearSearchButton.addEventListener("click",e=>this.onClearSearch(e)),this.searchField=this.ui.searchField,this.showSearchIcon(),this.el}showSearchIcon(){this.showSearchAccessory(this.searchIcon)}showClearSearchButton(){this.showSearchAccessory(this.clearSearchButton)}showSearchAccessory(e){ze(this.ui.searchAccessory,e)}clear(){this.searchField.value="",this.showSearchIcon()}focus(){this.searchField.focus()}onClearSearch(e){var t;e.stopPropagation(),this.searchField.value="",(t=this.resultsContainer)==null||t.destroy(),this.resultsContainer=null,this.showSearchIcon(),this.events.emit("content:show"),this.searchField.focus()}handleResultsKeydown(e){this.resultsContainer&&e.key==="Escape"&&this.onClearSearch(e)}onKeyDown(e){var t;e.key==="Escape"&&this.searchField.value?this.onClearSearch(e):(e.key==="Enter"||e.key==="ArrowDown")&&this.resultsContainer&&(e.preventDefault(),(t=this.resultsContainer.el.querySelector('[tabindex="0"]'))==null||t.focus())}onSearchInput(e){this.searchField.value?(this.showClearSearchButton(),this.search()):this.onClearSearch(e)}async search(){var e;if(this.searchField.value)try{const t=await this.emojiData.searchEmojis(this.searchField.value,this.customEmojis,this.emojiVersion,this.categories);if(this.events.emit("preview:hide"),t.length){const s=new vs;this.resultsContainer=this.viewFactory.create(We,{emojis:t,fullHeight:!0,showVariants:!0,lazyLoader:s}),this.resultsContainer.renderSync(),(e=this.resultsContainer)!=null&&e.el&&(s.observe(this.resultsContainer.el),this.resultsContainer.setActive(!0,{row:0,offset:0},!1),this.resultsContainer.el.addEventListener("keydown",n=>this.handleResultsKeydown(n)),this.events.emit("content:show",this.resultsContainer))}else this.events.emit("content:show",this.notFoundMessage)}catch{this.events.emit("content:show",this.errorMessage)}}}const ur=new Y(({classes:i})=>`
  <div class="${i.variantOverlay}">
    <div class="${i.variantPopup}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
  </div>
`),Ai=X("variantOverlay","variantPopup"),Lt={easing:"ease-in-out",duration:250,fill:"both"},Ti={opacity:[0,1]},Li={opacity:[0,1],transform:["scale3d(0.8, 0.8, 0.8)","scale3d(1, 1, 1)"]};class mr extends j{constructor({emoji:e,parent:t}){super({template:ur,classes:Ai,parent:t}),this.focusedEmojiIndex=0,this.focusTrap=new ms,this.animateShow=()=>Promise.all([Pe(this.el,Ti,Lt,this.options),Pe(this.ui.popup,Li,Lt,this.options)]),this.emoji=e}initialize(){this.uiElements={popup:j.byClass(Ai.variantPopup)},this.uiEvents=[j.uiEvent("click",this.handleClick),j.uiEvent("keydown",this.handleKeydown)],super.initialize()}animateHide(){const e={...Lt,direction:"reverse"};return Promise.all([Pe(this.el,Ti,e,this.options),Pe(this.ui.popup,Li,e,this.options)])}async hide(){await this.animateHide(),this.events.emit("variantPopup:hide")}handleKeydown(e){e.key==="Escape"&&(this.hide(),e.stopPropagation())}handleClick(e){this.ui.popup.contains(e.target)||this.hide()}getEmoji(e){return this.renderedEmojis[e]}setFocusedEmoji(e){const t=this.getEmoji(this.focusedEmojiIndex);t.tabIndex=-1,this.focusedEmojiIndex=e;const s=this.getEmoji(this.focusedEmojiIndex);s.tabIndex=0,s.focus()}destroy(){this.emojiContainer.destroy(),this.focusTrap.deactivate(),super.destroy()}renderSync(){const e={...this.emoji,skins:null},t=(this.emoji.skins||[]).map(n=>({...n,label:this.emoji.label,tags:this.emoji.tags})),s=[e,...t];return this.emojiContainer=this.viewFactory.create(We,{emojis:s,preview:!1}),super.renderSync({emojis:this.emojiContainer}),s.length<this.options.emojisPerRow&&this.el.style.setProperty("--emojis-per-row",s.length.toString()),this.el}activate(){this.emojiContainer.setActive(!0,{row:0,offset:0},!0),this.focusTrap.activate(this.el)}}const pr=new Y(({classes:i,i18n:e,category:t,pickerId:s,icon:n})=>`
<li class="${i.categoryTab}">
  <button
    aria-selected="false"
    role="tab"
    class="${i.categoryButton}"
    tabindex="-1"
    title="${e.get(`categories.${t.key}`,t.message||t.key)}"
    type="button"
    data-category="${t.key}"
    id="${s}-category-${t.key}"
  >
    <i data-icon="${n}"></i>
</li>
`),Pt=X("categoryTab","categoryTabActive","categoryButton");class gr extends j{constructor({category:e,icon:t}){super({template:pr,classes:Pt}),this.isActive=!1,this.category=e,this.icon=t}initialize(){this.uiElements={button:j.byClass(Pt.categoryButton)},this.uiEvents=[j.childEvent("button","click",this.selectCategory),j.childEvent("button","focus",this.selectCategory)],super.initialize()}renderSync(){return super.renderSync({category:this.category,icon:this.icon}),this.ui.button.ariaSelected="false",this.el}setActive(e,t={}){const{changeFocusable:s,performFocus:n,scroll:a}={changeFocusable:!0,performFocus:!0,scroll:!0,...t};this.el.classList.toggle(Pt.categoryTabActive,e),s&&(this.ui.button.tabIndex=e?0:-1,this.ui.button.ariaSelected=e.toString()),e&&n&&(this.ui.button.focus(),a&&this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!1})),this.isActive=e}selectCategory(){this.isActive||this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!0})}}const fr=new Y(({classes:i})=>`
  <div class="${i.categoryButtonsContainer}">
    <ul role="tablist" class="${i.categoryButtons}">
      <div data-placeholder="tabs"></div>
    </ul>
  </div>
`),yr=X("categoryButtons","categoryButtonsContainer");class vr extends j{constructor({categories:e}){super({template:fr,classes:yr}),this.activeCategoryIndex=0,this.categories=e}initialize(){this.keyBindings={ArrowLeft:this.stepSelectedTab(-1),ArrowRight:this.stepSelectedTab(1)},this.uiEvents=[j.uiEvent("scroll",this.checkOverflow)],super.initialize()}checkOverflow(){const e=Math.abs(this.el.scrollLeft-(this.el.scrollWidth-this.el.offsetWidth))>1,t=this.el.scrollLeft>0;this.el.className="categoryButtonsContainer",t&&e?this.el.classList.add("has-overflow-both"):t?this.el.classList.add("has-overflow-left"):e&&this.el.classList.add("has-overflow-right")}renderSync(){return this.tabViews=this.categories.map(e=>this.viewFactory.create(gr,{category:e,icon:wt[e.key]})),super.renderSync({tabs:this.tabViews.map(e=>e.renderSync())}),this.el}get currentCategory(){return this.categories[this.activeCategoryIndex]}get currentTabView(){return this.tabViews[this.activeCategoryIndex]}setActiveTab(e,t={}){this.checkOverflow();const s=this.currentTabView,n=this.tabViews[e];s.setActive(!1,t),n.setActive(!0,t),this.activeCategoryIndex=e}getTargetCategory(e){return e<0?this.categories.length-1:e>=this.categories.length?0:e}stepSelectedTab(e){return()=>{const t=this.activeCategoryIndex+e;this.setActiveTab(this.getTargetCategory(t),{changeFocusable:!0,performFocus:!0})}}}const wr=[{version:15,emoji:String.fromCodePoint(129768)},{version:14,emoji:String.fromCodePoint(128733)},{version:13,emoji:String.fromCodePoint(129729)},{version:12,emoji:String.fromCodePoint(129449)},{version:11,emoji:String.fromCodePoint(129463)},{version:5,emoji:String.fromCodePoint(129322)},{version:4,emoji:String.fromCodePoint(9877)},{version:3,emoji:String.fromCodePoint(129314)},{version:2,emoji:String.fromCodePoint(128488)},{version:1,emoji:String.fromCodePoint(128512)}];function br(){const i=wr.find(e=>xr(e.emoji));return(i==null?void 0:i.version)??1}function xr(i){const e=document.createElement("canvas").getContext("2d");if(e)return e.textBaseline="top",e.font="32px Arial",e.fillText(i,0,0),e.getImageData(16,16,1,1).data[0]!==0}function zt(i,e){return Array.from({length:i},()=>e).join("")}function Cr({showHeader:i,classes:e}){return i?`
    <header class="${e.header}">
      <div data-view="search"></div>
      <div data-view="categoryTabs" data-render="sync"></div>
    </header>
  `:""}function kr(i){const{classes:e,theme:t,className:s=""}=i;return`
    <div class="picmo__picker ${e.picker} ${t} ${s}">
      ${Cr(i)}
      <div class="${e.content}">
        <div data-view="emojiArea"></div>
      </div>
      <div data-view="preview"></div>
    </div>
  `}function Sr(i){const{emojiCount:e,classes:t,theme:s,className:n,categoryCount:a}=i,h=({showSearch:w,classes:g})=>w?`
    <div class="${g.searchSkeleton}">
      <div class="${g.searchInput} ${g.placeholder}"></div>
    </div>
  `:"",u=({showCategoryTabs:w,classes:g})=>w?`
    <div class="${g.categoryTabsSkeleton}">
      ${zt(a,`<div class="${g.placeholder} ${g.categoryTab}"></div>`)}
    </div>
  `:"",p=({showHeader:w,classes:g})=>w?`
    <header class="${g.headerSkeleton}">
      ${h(i)}
      ${u(i)}
    </header>
  `:"",b=({showPreview:w,classes:g})=>w?`
    <div class="${g.previewSkeleton}">
      <div class="${g.placeholder} ${g.previewEmoji}"></div>
      <div class="${g.placeholder} ${g.previewName}"></div>
      <ul class="${g.tagList}">
        ${zt(3,`<li class="${g.placeholder} ${g.tag}"></li>`)}
      </ul>
    </div>
  `:"";return`
    <div class="picmo__picker ${t.skeleton} ${t.picker} ${s} ${n}">
      ${p(i)}
      <div class="${t.contentSkeleton}">
        <div class="${t.placeholder} ${t.categoryName}"></div>
        <div class="${t.emojiGrid}">
          ${zt(e,`<div class="${t.placeholder} ${t.emoji}"></div>`)}
        </div>
      </div>
      ${b(i)}
    </div>
  `}const _r=new Y(i=>i.isLoaded?kr(i):Sr(i)),Ze=X("picker","skeleton","placeholder","searchSkeleton","searchInput","categoryTabsSkeleton","headerSkeleton","categoryTab","contentSkeleton","categoryName","emojiGrid","emoji","previewSkeleton","previewEmoji","previewName","tagList","tag","overlay","content","fullHeight","pluginContainer","header"),et={emojisPerRow:"--emojis-per-row",visibleRows:"--row-count",emojiSize:"--emoji-size"};class Er extends j{constructor(){super({template:_r,classes:Ze}),this.pickerReady=!1,this.externalEvents=new Rn,this.updaters={styleProperty:e=>t=>this.el.style.setProperty(et[e],t.toString()),theme:e=>{const t=this.options.theme,s=this.el.closest(`.${t}`);this.el.classList.remove(t),s==null||s.classList.remove(t),this.el.classList.add(e),s==null||s.classList.add(e)},className:e=>{this.options.className&&this.el.classList.remove(this.options.className),this.el.classList.add(e)},emojisPerRow:this.updateStyleProperty.bind(this,"emojisPerRow"),emojiSize:this.updateStyleProperty.bind(this,"emojiSize"),visibleRows:this.updateStyleProperty.bind(this,"visibleRows")}}initialize(){this.uiElements={pickerContent:j.byClass(Ze.content),header:j.byClass(Ze.header)},this.uiEvents=[j.uiEvent("keydown",this.handleKeyDown)],this.appEvents={error:this.onError,reinitialize:this.reinitialize,"data:ready":this.onDataReady,"content:show":this.showContent,"variantPopup:hide":this.hideVariantPopup,"emoji:select":this.selectEmoji},super.initialize(),this.options.recentsProvider}destroy(){var e,t;super.destroy(),(e=this.search)==null||e.destroy(),this.emojiArea.destroy(),(t=this.categoryTabs)==null||t.destroy(),this.events.removeAll(),this.externalEvents.removeAll()}clearRecents(){this.options.recentsProvider.clear()}addEventListener(e,t){this.externalEvents.on(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t)}initializePickerView(){this.pickerReady&&(this.showContent(),this.emojiArea.reset(!1))}handleKeyDown(e){const t=e.ctrlKey||e.metaKey;e.key==="s"&&t&&this.search&&(e.preventDefault(),this.search.focus())}buildChildViews(){return this.options.showPreview&&(this.preview=this.viewFactory.create(cr)),this.options.showSearch&&(this.search=this.viewFactory.create(dr,{categories:this.categories,emojiVersion:this.emojiVersion})),this.options.showCategoryTabs&&(this.categoryTabs=this.viewFactory.create(vr,{categories:this.categories})),this.currentView=this.emojiArea=this.viewFactory.create(tr,{categoryTabs:this.categoryTabs,categories:this.categories,emojiVersion:this.emojiVersion}),[this.preview,this.search,this.emojiArea,this.categoryTabs]}setStyleProperties(){this.options.showSearch||this.el.style.setProperty("--search-height-full","0px"),this.options.showCategoryTabs||(this.el.style.setProperty("--category-tabs-height","0px"),this.el.style.setProperty("--category-tabs-offset","0px")),this.options.showPreview||this.el.style.setProperty("--emoji-preview-height-full","0px"),Object.keys(et).forEach(e=>{this.options[e]&&this.el.style.setProperty(et[e],this.options[e].toString())})}updateStyleProperty(e,t){this.el.style.setProperty(et[e],t.toString())}reinitialize(){this.renderSync()}onError(e){const t=this.viewFactory.create(nr,{message:this.i18n.get("error.load")}),s=this.el.offsetHeight||375;throw this.el.style.height=`${s}px`,ze(this.el,t.renderSync()),e}async onDataReady(e){const t=this.el;try{e?this.emojiData=e:await this.emojiDataPromise,this.options.emojiVersion==="auto"?this.emojiVersion=br()||parseFloat(qo):this.emojiVersion=this.options.emojiVersion,this.categories=await this.emojiData.getCategories(this.options);const[s,n,a,h]=this.buildChildViews();await super.render({isLoaded:!0,search:n,categoryTabs:h,emojiArea:a,preview:s,showHeader:Boolean(this.search||this.categoryTabs),theme:this.options.theme,className:this.options.className}),this.el.style.setProperty("--category-count",this.categories.length.toString()),this.pickerReady=!0,t.replaceWith(this.el),this.setStyleProperties(),this.initializePickerView(),this.setInitialFocus(),this.externalEvents.emit("data:ready")}catch(s){this.events.emit("error",s)}}renderSync(){var e;let t=((e=this.options.categories)==null?void 0:e.length)||10;if(this.options.showRecents&&(t+=1),super.renderSync({isLoaded:!1,theme:this.options.theme,showSearch:this.options.showSearch,showPreview:this.options.showPreview,showCategoryTabs:this.options.showCategoryTabs,showHeader:this.options.showSearch||this.options.showCategoryTabs,emojiCount:this.options.emojisPerRow*this.options.visibleRows,categoryCount:t}),this.el.style.setProperty("--category-count",t.toString()),!this.options.rootElement)throw new Error("Picker must be given a root element via the rootElement option");return ze(this.options.rootElement,this.el),this.setStyleProperties(),this.pickerReady&&this.initializePickerView(),this.el}getInitialFocusTarget(){if(typeof this.options.autoFocus<"u")switch(this.options.autoFocus){case"emojis":return this.emojiArea.focusableEmoji;case"search":return this.search;case"auto":return this.search||this.emojiArea.focusableEmoji;default:return null}if(this.options.autoFocusSearch===!0)return console.warn("options.autoFocusSearch is deprecated, please use options.focusTarget instead"),this.search}setInitialFocus(){var e;this.pickerReady&&((e=this.getInitialFocusTarget())==null||e.focus())}reset(e=!0){var t;this.pickerReady&&(this.emojiArea.reset(e),this.showContent(this.emojiArea)),(t=this.search)==null||t.clear(),this.hideVariantPopup()}showContent(e=this.emojiArea){var t,s;e!==this.currentView&&(this.currentView!==this.emojiArea&&((t=this.currentView)==null||t.destroy()),this.ui.pickerContent.classList.toggle(Ze.fullHeight,e!==this.emojiArea),ze(this.ui.pickerContent,e.el),this.currentView=e,e===this.emojiArea?(this.emojiArea.reset(),this.categoryTabs&&this.ui.header.appendChild(this.categoryTabs.el)):(s=this.categoryTabs)==null||s.el.remove())}hideVariantPopup(){var e;(e=this.variantPopup)==null||e.destroy()}isPickerClick(e){var t,s;const n=e.target,a=this.el.contains(n),h=(s=(t=this.variantPopup)==null?void 0:t.el)==null?void 0:s.contains(n);return a||h}async selectEmoji({emoji:e}){var t,s;(t=e.skins)!=null&&t.length&&this.options.showVariants&&!this.isVariantPopupOpen?this.showVariantPopup(e):(await((s=this.variantPopup)==null?void 0:s.animateHide()),this.events.emit("variantPopup:hide"),await this.emitEmoji(e))}get isVariantPopupOpen(){return this.variantPopup&&!this.variantPopup.isDestroyed}async showVariantPopup(e){const t=document.activeElement;this.events.once("variantPopup:hide",()=>{t==null||t.focus()}),this.variantPopup=this.viewFactory.create(mr,{emoji:e,parent:this.el}),this.el.appendChild(this.variantPopup.renderSync()),this.variantPopup.activate()}async emitEmoji(e){this.externalEvents.emit("emoji:select",await this.renderer.doEmit(e)),this.options.recentsProvider.addOrUpdateRecent(e,this.options.maxRecents),this.events.emit("recent:add",e)}updateOptions(e){Object.keys(e).forEach(t=>{this.updaters[t](e[t])}),Object.assign(this.options,e)}}class jr{constructor({events:e,i18n:t,renderer:s,emojiData:n,options:a,customEmojis:h=[],pickerId:u}){this.events=e,this.i18n=t,this.renderer=s,this.emojiData=n,this.options=a,this.customEmojis=h,this.pickerId=u}setEmojiData(e){this.emojiData=Promise.resolve(e)}create(e,...t){const s=new e(...t);return s.setPickerId(this.pickerId),s.setEvents(this.events),s.setI18n(this.i18n),s.setRenderer(this.renderer),s.setEmojiData(this.emojiData),s.setOptions(this.options),s.setCustomEmojis(this.customEmojis),s.viewFactory=this,s.initialize(),s}}var ht;class Ar{constructor(e={}){ue(this,ht,void 0),Rt(this,ht,new Map(Object.entries(e)))}get(e,t=e){return me(this,ht).get(e)||t}}ht=new WeakMap;function Tr(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(!i||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i))}}function ws(){let i=!1;return function(e){!i&&(Tr(e),i=!0)}}const Lr=`.picmo__picker .picmo__icon{width:1.25em;height:1em;fill:currentColor}.picmo__icon-small{font-size:.8em}.picmo__icon-medium{font-size:1em}.picmo__icon-large{font-size:1.25em}.picmo__icon-2x{font-size:2em}.picmo__icon-3x{font-size:3em}.picmo__icon-4x{font-size:4em}.picmo__icon-5x{font-size:5em}.picmo__icon-8x{font-size:8em}.picmo__icon-10x{font-size:10em}.picmo__light,.picmo__auto{color-scheme:light;--accent-color: #4f46e5;--background-color: #f9fafb;--border-color: #cccccc;--category-name-background-color: #f9fafb;--category-name-button-color: #999999;--category-name-text-color: hsl(214, 30%, 50%);--category-tab-active-background-color: rgba(255, 255, 255, .6);--category-tab-active-color: var(--accent-color);--category-tab-color: #666;--category-tab-highlight-background-color: rgba(0, 0, 0, .15);--error-color-dark: hsl(0, 100%, 45%);--error-color: hsl(0, 100%, 40%);--focus-indicator-background-color: hsl(198, 65%, 85%);--focus-indicator-color: #333333;--hover-background-color: #c7d2fe;--placeholder-background-color: #cccccc;--search-background-color: #f9fafb;--search-focus-background-color: #ffffff;--search-icon-color: #999999;--search-placeholder-color: #71717a;--secondary-background-color: #e2e8f0;--secondary-text-color: #666666;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #000000;--variant-popup-background-color: #ffffff}.picmo__dark{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}@media (prefers-color-scheme: dark){.picmo__auto{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}}.picmo__picker .picmo__categoryButtonsContainer{overflow:auto;padding:2px 0}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-right{mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-left{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-both{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%)}.picmo__picker .picmo__categoryButtons{display:flex;flex-direction:row;gap:var(--tab-gap);margin:0;padding:0 .5em;align-items:center;height:var(--category-tabs-height);box-sizing:border-box;width:100%;justify-content:space-between;position:relative;list-style-type:none;justify-self:center;max-width:min(23.55rem,calc(var(--category-count, 1) * 2.5rem))}.picmo__picker .picmo__categoryButtons .picmo__categoryTab{display:flex;align-items:center;transition:all .1s;width:2em}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton{color:var(--category-tab-active-color);background:linear-gradient(rgba(255,255,255,.75) 0%,rgba(255,255,255,.75) 100%),linear-gradient(var(--category-tab-active-color) 0%,var(--category-tab-active-color) 100%);border:2px solid var(--category-tab-active-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton:hover{background-color:var(--category-tab-active-background-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton{border-radius:5px;background:transparent;border:2px solid transparent;color:var(--category-tab-color);cursor:pointer;padding:2px;vertical-align:middle;display:flex;align-items:center;justify-content:center;font-size:1.2rem;width:1.6em;height:1.6em;transition:all .1s}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:is(img){width:var(--category-tab-size);height:var(--category-tab-size)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:hover{background:var(--category-tab-highlight-background-color)}.picmo__dataError [data-icon]{opacity:.8}@keyframes appear{0%{opacity:0}to{opacity:.8}}@keyframes appear-grow{0%{opacity:0;transform:scale(.8)}to{opacity:.8;transform:scale(1)}}.picmo__picker .picmo__error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--secondary-text-color)}.picmo__picker .picmo__error .picmo__iconContainer{opacity:.8;animation:appear-grow .25s cubic-bezier(.175,.885,.32,1.275);--color-primary: var(--error-color);--color-secondary: var(--error-color-dark)}.picmo__picker .picmo__error .picmo__title{animation:appear .25s;animation-delay:50ms;animation-fill-mode:both}.picmo__picker .picmo__error button{padding:8px 16px;cursor:pointer;background:var(--background-color);border:1px solid var(--text-color);border-radius:5px;color:var(--text-color)}.picmo__picker .picmo__error button:hover{background:var(--text-color);color:var(--background-color)}.picmo__emojiButton{background:transparent;border:none;border-radius:15px;cursor:pointer;display:flex;font-family:var(--emoji-font);font-size:var(--emoji-size);height:100%;justify-content:center;align-items:center;margin:0;overflow:hidden;padding:0;width:100%}.picmo__emojiButton:hover{background:var(--hover-background-color)}.picmo__emojiButton:focus{border-radius:0;background:var(--focus-indicator-background-color);outline:1px solid var(--focus-indicator-color)}.picmo__picker .picmo__emojiArea{height:var(--emoji-area-height);overflow-y:auto;position:relative}.picmo__picker .picmo__emojiCategory{position:relative}.picmo__picker .picmo__emojiCategory .picmo__categoryName{font-size:.9em;padding:.5rem;margin:0;background:var(--category-name-background-color);color:var(--category-name-text-color);top:0;z-index:1;display:grid;gap:4px;grid-template-columns:auto 1fr auto;align-items:center;line-height:1;box-sizing:border-box;height:var(--category-name-height);justify-content:flex-start;text-transform:uppercase}.picmo__picker .picmo__emojiCategory .picmo__categoryName button{background:transparent;border:none;display:flex;align-items:center;cursor:pointer;color:var(--category-name-button-color)}.picmo__picker .picmo__emojiCategory .picmo__categoryName button:hover{opacity:1}.picmo__picker .picmo__emojiCategory .picmo__noRecents{color:var(--secondary-text-color);grid-column:1 / span var(--emojis-per-row);font-size:.9em;text-align:center;display:flex;align-items:center;justify-content:center;min-height:calc(var(--emoji-size) * var(--emoji-size-multiplier))}.picmo__picker .picmo__emojiCategory .picmo__recentEmojis[data-empty=true]{display:none}:is(.picmo__picker .picmo__emojiCategory) .picmo__recentEmojis[data-empty=false]+div{display:none}.picmo__picker .picmo__emojiContainer{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center}.picmo__picker.picmo__picker{--border-radius: 5px;--emoji-area-height: calc( (var(--row-count) * var(--emoji-size) * var(--emoji-size-multiplier)) + var(--category-name-height) );--content-height: var(--emoji-area-height);--emojis-per-row: 8;--row-count: 6;--emoji-preview-margin: 4px;--emoji-preview-height: calc(var(--emoji-preview-size) + 1em + 1px);--emoji-preview-height-full: calc(var(--emoji-preview-height) + var(--emoji-preview-margin));--emoji-preview-size: 2.75em;--emoji-size: 2rem;--emoji-size-multiplier: 1.3;--content-margin: 8px;--category-tabs-height:calc(1.5em + 9px);--category-tabs-offset: 8px;--category-tab-size: 1.2rem;--category-name-height: 2rem;--category-name-padding-y: 6px;--search-height: 2em;--search-margin: .5em;--search-margin-bottom: 4px;--search-height-full: calc(var(--search-height) + var(--search-margin) + var(--search-margin-bottom));--overlay-background-color: rgba(0, 0, 0, .8);--emoji-font: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";--ui-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;--ui-font-size: 16px;--picker-width: calc(var(--emojis-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 2.75rem);--preview-background-color: var(--secondary-background-color);background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);font-size:var(--ui-font-size);overflow:hidden;position:relative;width:var(--picker-width);display:grid;gap:8px}.picmo__picker.picmo__picker>*{font-family:var(--ui-font)}.picmo__picker.picmo__skeleton{background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);width:var(--picker-width);color:var(--secondary-text-color)}.picmo__picker.picmo__skeleton *{box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__picker.picmo__skeleton .picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}.picmo__picker.picmo__skeleton .picmo__headerSkeleton{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:flex;flex-direction:column;overflow:hidden;gap:8px;border-bottom:1px solid var(--border-color);width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton{padding:0 8px;height:var(--search-height)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton .picmo__searchInput{width:100%;height:28px;border-radius:3px}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton{height:var(--category-tabs-height);display:flex;flex-direction:row;align-items:center;justify-self:center;width:calc(2rem * var(--category-count, 1))}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton .picmo__categoryTab{width:25px;height:25px;padding:2px;border-radius:5px;margin:.25em}.picmo__picker.picmo__skeleton .picmo__contentSkeleton{height:var(--content-height);padding-right:8px;opacity:.7}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__categoryName{width:50%;height:1rem;margin:.5rem;box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center;width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid .picmo__emoji{width:var(--emoji-size);height:var(--emoji-size);border-radius:50%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton{height:var(--emoji-preview-height);border-top:1px solid var(--border-color);display:grid;align-items:center;padding:.5em;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags"}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewEmoji{grid-area:emoji;border-radius:50%;width:var(--emoji-preview-size);height:var(--emoji-preview-size)}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewName{grid-area:name;height:.8em;width:80%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList .picmo__tag{border-radius:3px;padding:2px 8px;margin-right:.25em;height:1em;width:20%}.picmo__overlay{background:rgba(0,0,0,.75);height:100%;left:0;position:fixed;top:0;width:100%;z-index:1000}.picmo__content{position:relative;overflow:hidden;height:var(--content-height)}.picmo__content.picmo__fullHeight{height:calc(var(--content-height) + var(--category-tabs-height) + var(--category-tabs-offset));overflow-y:auto}.picmo__pluginContainer{margin:.5em;display:flex;flex-direction:row}.picmo__header{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:grid;gap:8px;border-bottom:1px solid var(--border-color)}@media (prefers-reduced-motion: reduce){.picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__placeholder:after{display:none}}.picmo__picker .picmo__preview{border-top:1px solid var(--border-color);display:grid;align-items:center;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags";height:var(--emoji-preview-height);box-sizing:border-box;padding:.5em;position:relative;background:var(--preview-background-color)}.picmo__picker .picmo__preview .picmo__previewEmoji{grid-area:emoji;font-size:var(--emoji-preview-size);font-family:var(--emoji-font);width:1.25em;display:flex;align-items:center;justify-content:center}.picmo__picker .picmo__preview .picmo__previewName{grid-area:name;color:var(--text-color);font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.picmo__picker .picmo__preview .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0;font-size:.75em;overflow:hidden}.picmo__picker .picmo__preview .picmo__tag{border-radius:3px;background:var(--tag-background-color);color:var(--text-color);padding:2px 8px;margin-right:.25em;white-space:nowrap}.picmo__picker .picmo__preview .picmo__tag:last-child{margin-right:0}.picmo__picker .picmo__searchContainer{display:flex;height:var(--search-height);box-sizing:border-box;padding:0 8px;position:relative}.picmo__picker .picmo__searchContainer .picmo__searchField{background:var(--search-background-color);border-radius:3px;border:none;box-sizing:border-box;color:var(--text-color);font-size:.9em;outline:none;padding:.5em 2.25em .5em .5em;width:100%}.picmo__picker .picmo__searchContainer .picmo__searchField:focus{background:var(--search-focus-background-color)}.picmo__picker .picmo__searchContainer .picmo__searchField::placeholder{color:var(--search-placeholder-color)}.picmo__picker .picmo__searchContainer .picmo__searchAccessory{color:var(--search-icon-color);height:100%;position:absolute;right:1em;top:0;width:1.25rem;display:flex;align-items:center}.picmo__picker .picmo__searchContainer .picmo__searchAccessory svg{fill:var(--search-icon-color)}.picmo__picker .picmo__searchContainer .picmo__clearButton{border:0;color:var(--search-icon-color);background:transparent;cursor:pointer}.picmo__picker .picmo__searchContainer .picmo__clearSearchButton{cursor:pointer;border:none;background:transparent;color:var(--search-icon-color);font-size:1em;width:100%;height:100%;display:flex;align-items:center;padding:0}.picmo__picker .picmo__searchContainer .picmo__notFound [data-icon]{fill:#f3e265}.picmo__picker .picmo__variantOverlay{background:var(--overlay-background-color);border-radius:5px;display:flex;flex-direction:column;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%;z-index:1}.picmo__picker .picmo__variantOverlay .picmo__variantPopup{background:var(--variant-popup-background-color);border-radius:5px;margin:.5em;padding:.5em;text-align:center;user-select:none;display:flex;align-items:center;justify-content:center}.picmo__customEmoji{width:1em;height:1em}@keyframes shine{to{transform:translate(100%)}}.picmo__picker .picmo__imagePlaceholder{width:2rem;height:2rem;border-radius:50%}.picmo__placeholder{background:#DDDBDD;position:relative}.picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}
`;function Pr(i){return us(i.locale,i.dataStore,i.messages,i.emojiData)}let zr=0;function Ir(){return`picmo-${Date.now()}-${zr++}`}const $r=ws();function Br(i){$r(Lr);const e=fs(i),t=((e==null?void 0:e.custom)||[]).map(u=>({...u,custom:!0,tags:["custom",...u.tags||[]]})),s=new Mn,n=Pr(e),a=new Ar(e.i18n);n.then(u=>{s.emit("data:ready",u)}).catch(u=>{s.emit("error",u)});const h=new jr({events:s,i18n:a,customEmojis:t,renderer:e.renderer,options:e,emojiData:n,pickerId:Ir()}).create(Er);return h.renderSync(),h}function Ae(i){return i.split("-")[0]}function Ie(i){return i.split("-")[1]}function xt(i){return["top","bottom"].includes(Ae(i))?"x":"y"}function bs(i){return i==="y"?"height":"width"}function Pi(i,e,t){let{reference:s,floating:n}=i;const a=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,u=xt(e),p=bs(u),b=s[p]/2-n[p]/2,w=u==="x";let g;switch(Ae(e)){case"top":g={x:a,y:s.y-n.height};break;case"bottom":g={x:a,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:h};break;case"left":g={x:s.x-n.width,y:h};break;default:g={x:s.x,y:s.y}}switch(Ie(e)){case"start":g[u]-=b*(t&&w?-1:1);break;case"end":g[u]+=b*(t&&w?-1:1)}return g}const Or=async(i,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:a=[],platform:h}=t,u=await(h.isRTL==null?void 0:h.isRTL(e));let p=await h.getElementRects({reference:i,floating:e,strategy:n}),{x:b,y:w}=Pi(p,s,u),g=s,x={},E=0;for(let _=0;_<a.length;_++){const{name:L,fn:O}=a[_],{x:V,y:D,data:q,reset:N}=await O({x:b,y:w,initialPlacement:s,placement:g,strategy:n,middlewareData:x,rects:p,platform:h,elements:{reference:i,floating:e}});b=V??b,w=D??w,x={...x,[L]:{...x[L],...q}},N&&E<=50&&(E++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(p=N.rects===!0?await h.getElementRects({reference:i,floating:e,strategy:n}):N.rects),{x:b,y:w}=Pi(p,g,u)),_=-1)}return{x:b,y:w,placement:g,strategy:n,middlewareData:x}};function Mr(i){return typeof i!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(i):{top:i,right:i,bottom:i,left:i}}function pt(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function oi(i,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:a,rects:h,elements:u,strategy:p}=i,{boundary:b="clippingAncestors",rootBoundary:w="viewport",elementContext:g="floating",altBoundary:x=!1,padding:E=0}=e,_=Mr(E),L=u[x?g==="floating"?"reference":"floating":g],O=pt(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(L)))==null||t?L:L.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:b,rootBoundary:w,strategy:p})),V=pt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g==="floating"?{...h.floating,x:s,y:n}:h.reference,offsetParent:await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),strategy:p}):h[g]);return{top:O.top-V.top+_.top,bottom:V.bottom-O.bottom+_.bottom,left:O.left-V.left+_.left,right:V.right-O.right+_.right}}const Rr=Math.min,qr=Math.max;function zi(i,e,t){return qr(i,Rr(e,t))}const Nr={left:"right",right:"left",bottom:"top",top:"bottom"};function gt(i){return i.replace(/left|right|bottom|top/g,e=>Nr[e])}function xs(i,e,t){t===void 0&&(t=!1);const s=Ie(i),n=xt(i),a=bs(n);let h=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(h=gt(h)),{main:h,cross:gt(h)}}const Fr={start:"end",end:"start"};function Xt(i){return i.replace(/start|end/g,e=>Fr[e])}const Dr=["top","right","bottom","left"],Hr=Dr.reduce((i,e)=>i.concat(e,e+"-start",e+"-end"),[]),Vr=function(i){return i===void 0&&(i={}),{name:"autoPlacement",options:i,async fn(e){var t,s,n,a,h;const{x:u,y:p,rects:b,middlewareData:w,placement:g,platform:x,elements:E}=e,{alignment:_=null,allowedPlacements:L=Hr,autoAlignment:O=!0,...V}=i,D=function(W,H,M){return(W?[...M.filter(ee=>Ie(ee)===W),...M.filter(ee=>Ie(ee)!==W)]:M.filter(ee=>Ae(ee)===ee)).filter(ee=>!W||Ie(ee)===W||!!H&&Xt(ee)!==ee)}(_,O,L),q=await oi(e,V),N=(t=(s=w.autoPlacement)==null?void 0:s.index)!=null?t:0,re=D[N];if(re==null)return{};const{main:ye,cross:ke}=xs(re,b,await(x.isRTL==null?void 0:x.isRTL(E.floating)));if(g!==re)return{x:u,y:p,reset:{placement:D[0]}};const U=[q[Ae(re)],q[ye],q[ke]],A=[...(n=(a=w.autoPlacement)==null?void 0:a.overflows)!=null?n:[],{placement:re,overflows:U}],Z=D[N+1];if(Z)return{data:{index:N+1,overflows:A},reset:{placement:Z}};const K=A.slice().sort((W,H)=>W.overflows[0]-H.overflows[0]),de=(h=K.find(W=>{let{overflows:H}=W;return H.every(M=>M<=0)}))==null?void 0:h.placement,ie=de??K[0].placement;return ie!==g?{data:{index:N+1,overflows:A},reset:{placement:ie}}:{}}}},Wr=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t;const{placement:s,middlewareData:n,rects:a,initialPlacement:h,platform:u,elements:p}=e,{mainAxis:b=!0,crossAxis:w=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",flipAlignment:E=!0,..._}=i,L=Ae(s),O=g||(L===h||!E?[gt(h)]:function(U){const A=gt(U);return[Xt(U),A,Xt(A)]}(h)),V=[h,...O],D=await oi(e,_),q=[];let N=((t=n.flip)==null?void 0:t.overflows)||[];if(b&&q.push(D[L]),w){const{main:U,cross:A}=xs(s,a,await(u.isRTL==null?void 0:u.isRTL(p.floating)));q.push(D[U],D[A])}if(N=[...N,{placement:s,overflows:q}],!q.every(U=>U<=0)){var re,ye;const U=((re=(ye=n.flip)==null?void 0:ye.index)!=null?re:0)+1,A=V[U];if(A)return{data:{index:U,overflows:N},reset:{placement:A}};let Z="bottom";switch(x){case"bestFit":{var ke;const K=(ke=N.map(de=>[de,de.overflows.filter(ie=>ie>0).reduce((ie,W)=>ie+W,0)]).sort((de,ie)=>de[1]-ie[1])[0])==null?void 0:ke[0].placement;K&&(Z=K);break}case"initialPlacement":Z=h}if(s!==Z)return{reset:{placement:Z}}}return{}}}},Ii=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){const{x:t,y:s}=e,n=await async function(a,h){const{placement:u,platform:p,elements:b}=a,w=await(p.isRTL==null?void 0:p.isRTL(b.floating)),g=Ae(u),x=Ie(u),E=xt(u)==="x",_=["left","top"].includes(g)?-1:1,L=w&&E?-1:1,O=typeof h=="function"?h(a):h;let{mainAxis:V,crossAxis:D,alignmentAxis:q}=typeof O=="number"?{mainAxis:O,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...O};return x&&typeof q=="number"&&(D=x==="end"?-1*q:q),E?{x:D*L,y:V*_}:{x:V*_,y:D*L}}(e,i);return{x:t+n.x,y:s+n.y,data:n}}}};function Yr(i){return i==="x"?"y":"x"}const $i=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:a=!0,crossAxis:h=!1,limiter:u={fn:O=>{let{x:V,y:D}=O;return{x:V,y:D}}},...p}=i,b={x:t,y:s},w=await oi(e,p),g=xt(Ae(n)),x=Yr(g);let E=b[g],_=b[x];if(a){const O=g==="y"?"bottom":"right";E=zi(E+w[g==="y"?"top":"left"],E,E-w[O])}if(h){const O=x==="y"?"bottom":"right";_=zi(_+w[x==="y"?"top":"left"],_,_-w[O])}const L=u.fn({...e,[g]:E,[x]:_});return{...L,data:{x:L.x-t,y:L.y-s}}}}};function Cs(i){return i&&i.document&&i.location&&i.alert&&i.setInterval}function fe(i){if(i==null)return window;if(!Cs(i)){const e=i.ownerDocument;return e&&e.defaultView||window}return i}function ce(i){return fe(i).getComputedStyle(i)}function pe(i){return Cs(i)?"":i?(i.nodeName||"").toLowerCase():""}function ks(){const i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function he(i){return i instanceof fe(i).HTMLElement}function Ce(i){return i instanceof fe(i).Element}function $e(i){return typeof ShadowRoot>"u"?!1:i instanceof fe(i).ShadowRoot||i instanceof ShadowRoot}function Ct(i){const{overflow:e,overflowX:t,overflowY:s}=ce(i);return/auto|scroll|overlay|hidden/.test(e+s+t)}function Xr(i){return["table","td","th"].includes(pe(i))}function Bi(i){const e=/firefox/i.test(ks()),t=ce(i);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function Ss(){return!/^((?!chrome|android).)*safari/i.test(ks())}const Oi=Math.min,He=Math.max,ft=Math.round;function ge(i,e,t){var s,n,a,h;e===void 0&&(e=!1),t===void 0&&(t=!1);const u=i.getBoundingClientRect();let p=1,b=1;e&&he(i)&&(p=i.offsetWidth>0&&ft(u.width)/i.offsetWidth||1,b=i.offsetHeight>0&&ft(u.height)/i.offsetHeight||1);const w=Ce(i)?fe(i):window,g=!Ss()&&t,x=(u.left+(g&&(s=(n=w.visualViewport)==null?void 0:n.offsetLeft)!=null?s:0))/p,E=(u.top+(g&&(a=(h=w.visualViewport)==null?void 0:h.offsetTop)!=null?a:0))/b,_=u.width/p,L=u.height/b;return{width:_,height:L,top:E,right:x+_,bottom:E+L,left:x,x,y:E}}function xe(i){return(e=i,(e instanceof fe(e).Node?i.ownerDocument:i.document)||window.document).documentElement;var e}function kt(i){return Ce(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function _s(i){return ge(xe(i)).left+kt(i).scrollLeft}function Ur(i,e,t){const s=he(e),n=xe(e),a=ge(i,s&&function(p){const b=ge(p);return ft(b.width)!==p.offsetWidth||ft(b.height)!==p.offsetHeight}(e),t==="fixed");let h={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if(s||!s&&t!=="fixed")if((pe(e)!=="body"||Ct(n))&&(h=kt(e)),he(e)){const p=ge(e,!0);u.x=p.x+e.clientLeft,u.y=p.y+e.clientTop}else n&&(u.x=_s(n));return{x:a.left+h.scrollLeft-u.x,y:a.top+h.scrollTop-u.y,width:a.width,height:a.height}}function Es(i){return pe(i)==="html"?i:i.assignedSlot||i.parentNode||($e(i)?i.host:null)||xe(i)}function Mi(i){return he(i)&&ce(i).position!=="fixed"?function(e){let{offsetParent:t}=e,s=e,n=!1;for(;s&&s!==t;){const{assignedSlot:a}=s;if(a){let h=a.offsetParent;if(ce(a).display==="contents"){const u=a.hasAttribute("style"),p=a.style.display;a.style.display=ce(s).display,h=a.offsetParent,a.style.display=p,u||a.removeAttribute("style")}s=a,t!==h&&(t=h,n=!0)}else if($e(s)&&s.host&&n)break;s=$e(s)&&s.host||s.parentNode}return t}(i):null}function Ut(i){const e=fe(i);let t=Mi(i);for(;t&&Xr(t)&&ce(t).position==="static";)t=Mi(t);return t&&(pe(t)==="html"||pe(t)==="body"&&ce(t).position==="static"&&!Bi(t))?e:t||function(s){let n=Es(s);for($e(n)&&(n=n.host);he(n)&&!["html","body"].includes(pe(n));){if(Bi(n))return n;{const a=n.parentNode;n=$e(a)?a.host:a}}return null}(i)||e}function Ri(i){if(he(i))return{width:i.offsetWidth,height:i.offsetHeight};const e=ge(i);return{width:e.width,height:e.height}}function js(i){const e=Es(i);return["html","body","#document"].includes(pe(e))?i.ownerDocument.body:he(e)&&Ct(e)?e:js(e)}function yt(i,e){var t;e===void 0&&(e=[]);const s=js(i),n=s===((t=i.ownerDocument)==null?void 0:t.body),a=fe(s),h=n?[a].concat(a.visualViewport||[],Ct(s)?s:[]):s,u=e.concat(h);return n?u:u.concat(yt(h))}function qi(i,e,t){return e==="viewport"?pt(function(s,n){const a=fe(s),h=xe(s),u=a.visualViewport;let p=h.clientWidth,b=h.clientHeight,w=0,g=0;if(u){p=u.width,b=u.height;const x=Ss();(x||!x&&n==="fixed")&&(w=u.offsetLeft,g=u.offsetTop)}return{width:p,height:b,x:w,y:g}}(i,t)):Ce(e)?function(s,n){const a=ge(s,!1,n==="fixed"),h=a.top+s.clientTop,u=a.left+s.clientLeft;return{top:h,left:u,x:u,y:h,right:u+s.clientWidth,bottom:h+s.clientHeight,width:s.clientWidth,height:s.clientHeight}}(e,t):pt(function(s){var n;const a=xe(s),h=kt(s),u=(n=s.ownerDocument)==null?void 0:n.body,p=He(a.scrollWidth,a.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),b=He(a.scrollHeight,a.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0);let w=-h.scrollLeft+_s(s);const g=-h.scrollTop;return ce(u||a).direction==="rtl"&&(w+=He(a.clientWidth,u?u.clientWidth:0)-p),{width:p,height:b,x:w,y:g}}(xe(i)))}function Kr(i){const e=yt(i),t=["absolute","fixed"].includes(ce(i).position)&&he(i)?Ut(i):i;return Ce(t)?e.filter(s=>Ce(s)&&function(n,a){const h=a.getRootNode==null?void 0:a.getRootNode();if(n.contains(a))return!0;if(h&&$e(h)){let u=a;do{if(u&&n===u)return!0;u=u.parentNode||u.host}while(u)}return!1}(s,t)&&pe(s)!=="body"):[]}const Gr={getClippingRect:function(i){let{element:e,boundary:t,rootBoundary:s,strategy:n}=i;const a=[...t==="clippingAncestors"?Kr(e):[].concat(t),s],h=a[0],u=a.reduce((p,b)=>{const w=qi(e,b,n);return p.top=He(w.top,p.top),p.right=Oi(w.right,p.right),p.bottom=Oi(w.bottom,p.bottom),p.left=He(w.left,p.left),p},qi(e,h,n));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:e,offsetParent:t,strategy:s}=i;const n=he(t),a=xe(t);if(t===a)return e;let h={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if((n||!n&&s!=="fixed")&&((pe(t)!=="body"||Ct(a))&&(h=kt(t)),he(t))){const p=ge(t,!0);u.x=p.x+t.clientLeft,u.y=p.y+t.clientTop}return{...e,x:e.x-h.scrollLeft+u.x,y:e.y-h.scrollTop+u.y}},isElement:Ce,getDimensions:Ri,getOffsetParent:Ut,getDocumentElement:xe,getElementRects:i=>{let{reference:e,floating:t,strategy:s}=i;return{reference:Ur(e,Ut(t),s),floating:{...Ri(t),x:0,y:0}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>ce(i).direction==="rtl"};function Jr(i,e,t,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:h=!0,animationFrame:u=!1}=s,p=n&&!u,b=a&&!u,w=p||b?[...Ce(i)?yt(i):[],...yt(e)]:[];w.forEach(_=>{p&&_.addEventListener("scroll",t,{passive:!0}),b&&_.addEventListener("resize",t)});let g,x=null;if(h){let _=!0;x=new ResizeObserver(()=>{_||t(),_=!1}),Ce(i)&&!u&&x.observe(i),x.observe(e)}let E=u?ge(i):null;return u&&function _(){const L=ge(i);!E||L.x===E.x&&L.y===E.y&&L.width===E.width&&L.height===E.height||t(),E=L,g=requestAnimationFrame(_)}(),t(),()=>{var _;w.forEach(L=>{p&&L.removeEventListener("scroll",t),b&&L.removeEventListener("resize",t)}),(_=x)==null||_.disconnect(),x=null,u&&cancelAnimationFrame(g)}}const Qr=(i,e,t)=>Or(i,e,{platform:Gr,...t});async function Zr(i,e,t,s){if(!s)throw new Error("Must provide a positioning option");return await(typeof s=="string"?ea(i,e,t,s):ta(e,s))}async function ea(i,e,t,s){if(!t)throw new Error("Reference element is required for relative positioning");let n;return s==="auto"?n={middleware:[Vr(),$i(),Ii({mainAxis:5,crossAxis:12})]}:n={placement:s,middleware:[Wr(),$i(),Ii(5)]},Jr(t,e,async()=>{if((!t.isConnected||!t.offsetParent)&&ia(i))return;const{x:a,y:h}=await Qr(t,e,n);Object.assign(e.style,{position:"absolute",left:`${a}px`,top:`${h}px`})})}function ta(i,e){return i.style.position="fixed",Object.entries(e).forEach(([t,s])=>{i.style[t]=s}),()=>{}}function ia(i){switch(i.options.onPositionLost){case"close":return i.close(),!0;case"destroy":return i.destroy(),!0;case"hold":return!0}}const sa={hideOnClickOutside:!0,hideOnEmojiSelect:!0,hideOnEscape:!0,position:"auto",showCloseButton:!0,onPositionLost:"none"};function oa(i={}){return{...sa,rootElement:document.body,...i}}const na='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>',Ni=X("popupContainer","closeButton");class ra{constructor(e,t){this.isOpen=!1,this.externalEvents=new bt,this.options={...oa(t),...fs(e)},this.popupEl=document.createElement("div"),this.popupEl.classList.add(Ni.popupContainer),this.popupEl.classList.add(this.options.theme),t.className&&this.popupEl.classList.add(t.className),this.options.showCloseButton&&(this.closeButton=document.createElement("button"),this.closeButton.type="button",this.closeButton.classList.add(Ni.closeButton),this.closeButton.innerHTML=na,this.closeButton.addEventListener("click",()=>{this.close()}),this.popupEl.appendChild(this.closeButton));const s=document.createElement("div");this.popupEl.appendChild(s),this.picker=Br({...this.options,rootElement:s}),this.focusTrap=new ms,this.picker.addEventListener("data:ready",()=>{this.focusTrap.activate(this.picker.el),this.picker.setInitialFocus()}),this.options.hideOnEmojiSelect&&this.picker.addEventListener("emoji:select",()=>{var n;this.close(),(n=this.triggerElement)==null||n.focus()}),this.options.hideOnClickOutside&&(this.onDocumentClick=this.onDocumentClick.bind(this),document.addEventListener("click",this.onDocumentClick)),this.options.hideOnEscape&&(this.handleKeydown=this.handleKeydown.bind(this),this.popupEl.addEventListener("keydown",this.handleKeydown)),this.referenceElement=this.options.referenceElement,this.triggerElement=this.options.triggerElement}addEventListener(e,t){this.externalEvents.on(e,t),this.picker.addEventListener(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t),this.picker.removeEventListener(e,t)}handleKeydown(e){var t;e.key==="Escape"&&(this.close(),(t=this.triggerElement)==null||t.focus())}async destroy(){this.isOpen&&await this.close(),document.removeEventListener("click",this.onDocumentClick),this.picker.destroy(),this.externalEvents.removeAll()}toggle(e){return this.isOpen?this.close():this.open(e)}async open({triggerElement:e,referenceElement:t}={}){this.isOpen||(e&&(this.triggerElement=e),t&&(this.referenceElement=t),await this.initiateOpenStateChange(!0),this.popupEl.style.opacity="0",this.options.rootElement.appendChild(this.popupEl),await this.setPosition(),this.picker.reset(!1),await this.animatePopup(!0),await this.animateCloseButton(!0),this.picker.setInitialFocus(),this.externalEvents.emit("picker:open"))}async close(){var e;this.isOpen&&(await this.initiateOpenStateChange(!1),await this.animateCloseButton(!1),await this.animatePopup(!1),this.popupEl.remove(),this.picker.reset(),(e=this.positionCleanup)==null||e.call(this),this.focusTrap.deactivate(),this.externalEvents.emit("picker:close"))}getRunningAnimations(){return this.picker.el.getAnimations().filter(e=>e.playState==="running")}async setPosition(){var e;(e=this.positionCleanup)==null||e.call(this),this.positionCleanup=await Zr(this,this.popupEl,this.referenceElement,this.options.position)}awaitPendingAnimations(){return Promise.all(this.getRunningAnimations().map(e=>e.finished))}onDocumentClick(e){var t;const s=e.target,n=(t=this.triggerElement)==null?void 0:t.contains(s);this.isOpen&&!this.picker.isPickerClick(e)&&!n&&this.close()}animatePopup(e){return Pe(this.popupEl,{opacity:[0,1],transform:["scale(0.9)","scale(1)"]},{duration:150,id:e?"show-picker":"hide-picker",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}animateCloseButton(e){if(this.closeButton)return Pe(this.closeButton,{opacity:[0,1]},{duration:25,id:e?"show-close":"hide-close",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}async initiateOpenStateChange(e){this.isOpen=e,await this.awaitPendingAnimations()}}const aa=`.picmo__popupContainer{display:flex;flex-direction:column;position:absolute}.picmo__popupContainer .picmo__closeButton{position:absolute;opacity:0;background:transparent;border:none;z-index:1;right:0;top:0;cursor:pointer;padding:4px;align-self:flex-end;transform:translate(50%,-50%);background:#999999;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.picmo__popupContainer .picmo__closeButton:hover{background:var(--accent-color)}.picmo__popupContainer .picmo__closeButton svg{fill:#fff;width:1.25rem;height:1.25rem}
`,ca=ws();function la(i,e){return ca(aa),new ra({autoFocus:"auto",...i},e)}const Fi=document.querySelector("#chat-input-section"),ha=document.querySelector("#chat-message").innerHTML;window.picker=la({className:"mr-2 lg:mr-5 z-30 overflow-auto max-w-[320px] max-h-[450px]",showPreview:!1,showSearch:!1,maxRecents:24,initialCategory:"recents",emojisPerRow:8,emojiSize:"24px",showCategoryTabs:!1},{triggerElement:Fi,referenceElement:Fi,position:"bottom-end",hideOnEmojiSelect:!1,showCloseButton:!1});document.querySelector("#chat-emoji-picker").addEventListener("click",function(){picker.toggle()});picker.addEventListener("emoji:select",i=>{let e=ha==document.querySelector("#chat-message").innerHTML?"":document.querySelector("#chat-message").innerHTML;document.querySelector("#chat-message").innerHTML=e+i.emoji});picker.addEventListener("picker:open",i=>{document.querySelector(".picmo__popupContainer").style.zIndex=70});var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kt={},ua={get exports(){return Kt},set exports(i){Kt=i}};(function(i,e){(function(t,s){i.exports=s()})(da,function(){function t(l){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function s(l,o){if(!(l instanceof o))throw new TypeError("Cannot call a class as a function")}function n(l,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}function a(l,o,r){return o&&n(l.prototype,o),r&&n(l,r),l}var h=Date.now();function u(){var l={},o=!0,r=0,c=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(o=arguments[0],r++);for(var d=function(f){for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(o&&Object.prototype.toString.call(f[y])==="[object Object]"?l[y]=u(!0,l[y],f[y]):l[y]=f[y])};r<c;r++){var m=arguments[r];d(m)}return l}function p(l,o){if((K(l)||l===window||l===document)&&(l=[l]),ie(l)||W(l)||(l=[l]),ee(l)!=0){if(ie(l)&&!W(l))for(var r=l.length,c=0;c<r&&o.call(l[c],l[c],c,l)!==!1;c++);else if(W(l)){for(var d in l)if(M(l,d)&&o.call(l[d],l[d],d,l)===!1)break}}}function b(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=l[h]=l[h]||[],d={all:c,evt:null,found:null};return o&&r&&ee(c)>0&&p(c,function(m,f){if(m.eventName==o&&m.fn.toString()==r.toString())return d.found=!0,d.evt=f,!1}),d}function w(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=o.onElement,c=o.withCallback,d=o.avoidDuplicate,m=d===void 0||d,f=o.once,y=f!==void 0&&f,v=o.useCapture,S=v!==void 0&&v,C=arguments.length>2?arguments[2]:void 0,k=r||[];function P(T){A(c)&&c.call(C,T,this),y&&P.destroy()}return Z(k)&&(k=document.querySelectorAll(k)),P.destroy=function(){p(k,function(T){var $=b(T,l,P);$.found&&$.all.splice($.evt,1),T.removeEventListener&&T.removeEventListener(l,P,S)})},p(k,function(T){var $=b(T,l,P);(T.addEventListener&&m&&!$.found||!m)&&(T.addEventListener(l,P,S),$.all.push({eventName:l,fn:P}))}),P}function g(l,o){p(o.split(" "),function(r){return l.classList.add(r)})}function x(l,o){p(o.split(" "),function(r){return l.classList.remove(r)})}function E(l,o){return l.classList.contains(o)}function _(l,o){for(;l!==document.body;){if(!(l=l.parentElement))return!1;if(typeof l.matches=="function"?l.matches(o):l.msMatchesSelector(o))return l}}function L(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!l||o==="")return!1;if(o==="none")return A(r)&&r(),!1;var c=re(),d=o.split(" ");p(d,function(m){g(l,"g"+m)}),w(c,{onElement:l,avoidDuplicate:!1,once:!0,withCallback:function(m,f){p(d,function(y){x(f,"g"+y)}),A(r)&&r()}})}function O(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(o==="")return l.style.webkitTransform="",l.style.MozTransform="",l.style.msTransform="",l.style.OTransform="",l.style.transform="",!1;l.style.webkitTransform=o,l.style.MozTransform=o,l.style.msTransform=o,l.style.OTransform=o,l.style.transform=o}function V(l){l.style.display="block"}function D(l){l.style.display="none"}function q(l){var o=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=l;r.firstChild;)o.appendChild(r.firstChild);return o}function N(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function re(){var l,o=document.createElement("fakeelement"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(l in r)if(o.style[l]!==void 0)return r[l]}function ye(l,o,r,c){if(l())o();else{var d;r||(r=100);var m=setInterval(function(){l()&&(clearInterval(m),d&&clearTimeout(d),o())},r);c&&(d=setTimeout(function(){clearInterval(m)},c))}}function ke(l,o,r){if(H(l))console.error("Inject assets error");else if(A(o)&&(r=o,o=!1),Z(o)&&o in window)A(r)&&r();else{var c;if(l.indexOf(".css")!==-1){if((c=document.querySelectorAll('link[href="'+l+'"]'))&&c.length>0)return void(A(r)&&r());var d=document.getElementsByTagName("head")[0],m=d.querySelectorAll('link[rel="stylesheet"]'),f=document.createElement("link");return f.rel="stylesheet",f.type="text/css",f.href=l,f.media="all",m?d.insertBefore(f,m[0]):d.appendChild(f),void(A(r)&&r())}if((c=document.querySelectorAll('script[src="'+l+'"]'))&&c.length>0){if(A(r)){if(Z(o))return ye(function(){return window[o]!==void 0},function(){r()}),!1;r()}}else{var y=document.createElement("script");y.type="text/javascript",y.src=l,y.onload=function(){if(A(r)){if(Z(o))return ye(function(){return window[o]!==void 0},function(){r()}),!1;r()}},document.body.appendChild(y)}}}function U(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function A(l){return typeof l=="function"}function Z(l){return typeof l=="string"}function K(l){return!(!l||!l.nodeType||l.nodeType!=1)}function de(l){return Array.isArray(l)}function ie(l){return l&&l.length&&isFinite(l.length)}function W(l){return t(l)==="object"&&l!=null&&!A(l)&&!de(l)}function H(l){return l==null}function M(l,o){return l!==null&&hasOwnProperty.call(l,o)}function ee(l){if(W(l)){if(l.keys)return l.keys().length;var o=0;for(var r in l)M(l,r)&&o++;return o}return l.length}function Ye(l){return!isNaN(parseFloat(l))&&isFinite(l)}function ni(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,o=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!o.length)return!1;if(o.length==1)return o[0];typeof l=="string"&&(l=parseInt(l));var r=[];p(o,function(y){r.push(y.getAttribute("data-taborder"))});var c=Math.max.apply(Math,r.map(function(y){return parseInt(y)})),d=l<0?1:l+1;d>c&&(d="1");var m=r.filter(function(y){return y>=parseInt(d)}),f=m.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(f,'"]'))}function As(l){if(l.events.hasOwnProperty("keyboard"))return!1;l.events.keyboard=w("keydown",{onElement:window,withCallback:function(o,r){var c=(o=o||window.event).keyCode;if(c==9){var d=document.querySelector(".gbtn.focused");if(!d){var m=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(m=="input"||m=="textarea"||m=="button")return}o.preventDefault();var f=document.querySelectorAll(".gbtn[data-taborder]");if(!f||f.length<=0)return;if(!d){var y=ni();return void(y&&(y.focus(),g(y,"focused")))}var v=ni(d.getAttribute("data-taborder"));x(d,"focused"),v&&(v.focus(),g(v,"focused"))}c==39&&l.nextSlide(),c==37&&l.prevSlide(),c==27&&l.close()}})}function Xe(l){return Math.sqrt(l.x*l.x+l.y*l.y)}function Ts(l,o){var r=function(c,d){var m=Xe(c)*Xe(d);if(m===0)return 0;var f=function(y,v){return y.x*v.x+y.y*v.y}(c,d)/m;return f>1&&(f=1),Math.acos(f)}(l,o);return function(c,d){return c.x*d.y-d.x*c.y}(l,o)>0&&(r*=-1),180*r/Math.PI}var Ls=function(){function l(o){s(this,l),this.handlers=[],this.el=o}return a(l,[{key:"add",value:function(o){this.handlers.push(o)}},{key:"del",value:function(o){o||(this.handlers=[]);for(var r=this.handlers.length;r>=0;r--)this.handlers[r]===o&&this.handlers.splice(r,1)}},{key:"dispatch",value:function(){for(var o=0,r=this.handlers.length;o<r;o++){var c=this.handlers[o];typeof c=="function"&&c.apply(this.el,arguments)}}}]),l}();function G(l,o){var r=new Ls(l);return r.add(o),r}var Ps=function(){function l(o,r){s(this,l),this.element=typeof o=="string"?document.querySelector(o):o,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var c=function(){};this.rotate=G(this.element,r.rotate||c),this.touchStart=G(this.element,r.touchStart||c),this.multipointStart=G(this.element,r.multipointStart||c),this.multipointEnd=G(this.element,r.multipointEnd||c),this.pinch=G(this.element,r.pinch||c),this.swipe=G(this.element,r.swipe||c),this.tap=G(this.element,r.tap||c),this.doubleTap=G(this.element,r.doubleTap||c),this.longTap=G(this.element,r.longTap||c),this.singleTap=G(this.element,r.singleTap||c),this.pressMove=G(this.element,r.pressMove||c),this.twoFingerPressMove=G(this.element,r.twoFingerPressMove||c),this.touchMove=G(this.element,r.touchMove||c),this.touchEnd=G(this.element,r.touchEnd||c),this.touchCancel=G(this.element,r.touchCancel||c),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}}return a(l,[{key:"start",value:function(o){if(o.touches)if(o.target&&o.target.nodeName&&["a","button","input"].indexOf(o.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",o.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=o.touches[0].pageX,this.y1=o.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(o,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var r=this.preV;if(o.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var c={x:o.touches[1].pageX-this.x1,y:o.touches[1].pageY-this.y1};r.x=c.x,r.y=c.y,this.pinchStartLen=Xe(r),this.multipointStart.dispatch(o,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(o,this.element),this._preventTap=!0}.bind(this),750)}}},{key:"move",value:function(o){if(o.touches){var r=this.preV,c=o.touches.length,d=o.touches[0].pageX,m=o.touches[0].pageY;if(this.isDoubleTap=!1,c>1){var f=o.touches[1].pageX,y=o.touches[1].pageY,v={x:o.touches[1].pageX-d,y:o.touches[1].pageY-m};r.x!==null&&(this.pinchStartLen>0&&(o.zoom=Xe(v)/this.pinchStartLen,this.pinch.dispatch(o,this.element)),o.angle=Ts(v,r),this.rotate.dispatch(o,this.element)),r.x=v.x,r.y=v.y,this.x2!==null&&this.sx2!==null?(o.deltaX=(d-this.x2+f-this.sx2)/2,o.deltaY=(m-this.y2+y-this.sy2)/2):(o.deltaX=0,o.deltaY=0),this.twoFingerPressMove.dispatch(o,this.element),this.sx2=f,this.sy2=y}else{if(this.x2!==null){o.deltaX=d-this.x2,o.deltaY=m-this.y2;var S=Math.abs(this.x1-this.x2),C=Math.abs(this.y1-this.y2);(S>10||C>10)&&(this._preventTap=!0)}else o.deltaX=0,o.deltaY=0;this.pressMove.dispatch(o,this.element)}this.touchMove.dispatch(o,this.element),this._cancelLongTap(),this.x2=d,this.y2=m,c>1&&o.preventDefault()}}},{key:"end",value:function(o){if(o.changedTouches){this._cancelLongTap();var r=this;o.touches.length<2&&(this.multipointEnd.dispatch(o,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(o.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){r.swipe.dispatch(o,r.element)},0)):(this.tapTimeout=setTimeout(function(){r._preventTap||r.tap.dispatch(o,r.element),r.isDoubleTap&&(r.doubleTap.dispatch(o,r.element),r.isDoubleTap=!1)},0),r.isDoubleTap||(r.singleTapTimeout=setTimeout(function(){r.singleTap.dispatch(o,r.element)},250))),this.touchEnd.dispatch(o,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(o){this.cancelAll(),this.touchCancel.dispatch(o,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(o,r,c,d){return Math.abs(o-r)>=Math.abs(c-d)?o-r>0?"Left":"Right":c-d>0?"Up":"Down"}},{key:"on",value:function(o,r){this[o]&&this[o].add(r)}},{key:"off",value:function(o,r){this[o]&&this[o].del(r)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]),l}();function St(l){var o=function(){var f,y=document.createElement("fakeelement"),v={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(f in v)if(y.style[f]!==void 0)return v[f]}(),r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=E(l,"gslide-media")?l:l.querySelector(".gslide-media"),d=_(c,".ginner-container"),m=l.querySelector(".gslide-description");r>769&&(c=d),g(c,"greset"),O(c,"translate3d(0, 0, 0)"),w(o,{onElement:c,once:!0,withCallback:function(f,y){x(c,"greset")}}),c.style.opacity="",m&&(m.style.opacity="")}function zs(l){if(l.events.hasOwnProperty("touch"))return!1;var o,r,c,d=N(),m=d.width,f=d.height,y=!1,v=null,S=null,C=null,k=!1,P=1,T=1,$=!1,R=!1,I=null,se=null,Q=null,ve=null,we=0,Se=0,Te=!1,_t=!1,_e={},Ee={},di=0,ui=0,Fs=document.getElementById("glightbox-slider"),Ke=document.querySelector(".goverlay"),Ds=new Ps(Fs,{touchStart:function(B){if(y=!0,(E(B.targetTouches[0].target,"ginner-container")||_(B.targetTouches[0].target,".gslide-desc")||B.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(y=!1),_(B.targetTouches[0].target,".gslide-inline")&&!E(B.targetTouches[0].target.parentNode,"gslide-inline")&&(y=!1),y){if(Ee=B.targetTouches[0],_e.pageX=B.targetTouches[0].pageX,_e.pageY=B.targetTouches[0].pageY,di=B.targetTouches[0].clientX,ui=B.targetTouches[0].clientY,v=l.activeSlide,S=v.querySelector(".gslide-media"),c=v.querySelector(".gslide-inline"),C=null,E(S,"gslide-image")&&(C=S.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(S=v.querySelector(".ginner-container")),x(Ke,"greset"),B.pageX>20&&B.pageX<window.innerWidth-20)return;B.preventDefault()}},touchMove:function(B){if(y&&(Ee=B.targetTouches[0],!$&&!R)){if(c&&c.offsetHeight>f){var J=_e.pageX-Ee.pageX;if(Math.abs(J)<=13)return!1}k=!0;var be,Ge=B.targetTouches[0].clientX,Hs=B.targetTouches[0].clientY,Vs=di-Ge,Ws=ui-Hs;if(Math.abs(Vs)>Math.abs(Ws)?(Te=!1,_t=!0):(_t=!1,Te=!0),o=Ee.pageX-_e.pageX,we=100*o/m,r=Ee.pageY-_e.pageY,Se=100*r/f,Te&&C&&(be=1-Math.abs(r)/f,Ke.style.opacity=be,l.settings.touchFollowAxis&&(we=0)),_t&&(be=1-Math.abs(o)/m,S.style.opacity=be,l.settings.touchFollowAxis&&(Se=0)),!C)return O(S,"translate3d(".concat(we,"%, 0, 0)"));O(S,"translate3d(".concat(we,"%, ").concat(Se,"%, 0)"))}},touchEnd:function(){if(y){if(k=!1,R||$)return Q=I,void(ve=se);var B=Math.abs(parseInt(Se)),J=Math.abs(parseInt(we));if(!(B>29&&C))return B<29&&J<25?(g(Ke,"greset"),Ke.style.opacity=1,St(S)):void 0;l.close()}},multipointEnd:function(){setTimeout(function(){$=!1},50)},multipointStart:function(){$=!0,P=T||1},pinch:function(B){if(!C||k)return!1;$=!0,C.scaleX=C.scaleY=P*B.zoom;var J=P*B.zoom;if(R=!0,J<=1)return R=!1,J=1,ve=null,Q=null,I=null,se=null,void C.setAttribute("style","");J>4.5&&(J=4.5),C.style.transform="scale3d(".concat(J,", ").concat(J,", 1)"),T=J},pressMove:function(B){if(R&&!$){var J=Ee.pageX-_e.pageX,be=Ee.pageY-_e.pageY;Q&&(J+=Q),ve&&(be+=ve),I=J,se=be;var Ge="translate3d(".concat(J,"px, ").concat(be,"px, 0)");T&&(Ge+=" scale3d(".concat(T,", ").concat(T,", 1)")),O(C,Ge)}},swipe:function(B){if(!R)if($)$=!1;else{if(B.direction=="Left"){if(l.index==l.elements.length-1)return St(S);l.nextSlide()}if(B.direction=="Right"){if(l.index==0)return St(S);l.prevSlide()}}}});l.events.touch=Ds}var Is=function(){function l(o,r){var c=this,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(s(this,l),this.img=o,this.slide=r,this.onclose=d,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(m){return c.dragStart(m)},!1),this.img.addEventListener("mouseup",function(m){return c.dragEnd(m)},!1),this.img.addEventListener("mousemove",function(m){return c.drag(m)},!1),this.img.addEventListener("click",function(m){return c.slide.classList.contains("dragging-nav")?(c.zoomOut(),!1):c.zoomedIn?void(c.zoomedIn&&!c.dragging&&c.zoomOut()):c.zoomIn()},!1),this.img.setZoomEvents=!0}return a(l,[{key:"zoomIn",value:function(){var o=this.widowWidth();if(!(this.zoomedIn||o<=768)){var r=this.img;if(r.setAttribute("data-style",r.getAttribute("style")),r.style.maxWidth=r.naturalWidth+"px",r.style.maxHeight=r.naturalHeight+"px",r.naturalWidth>o){var c=o/2-r.naturalWidth/2;this.setTranslate(this.img.parentNode,c,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(o){o.preventDefault(),this.zoomedIn?(o.type==="touchstart"?(this.initialX=o.touches[0].clientX-this.xOffset,this.initialY=o.touches[0].clientY-this.yOffset):(this.initialX=o.clientX-this.xOffset,this.initialY=o.clientY-this.yOffset),o.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(o){var r=this;o.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){r.dragging=!1,r.img.isDragging=!1,r.img.classList.remove("dragging")},100)}},{key:"drag",value:function(o){this.active&&(o.preventDefault(),o.type==="touchmove"?(this.currentX=o.touches[0].clientX-this.initialX,this.currentY=o.touches[0].clientY-this.initialY):(this.currentX=o.clientX-this.initialX,this.currentY=o.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(o){if(this.zoomedIn){var r=o.clientX-this.img.naturalWidth/2,c=o.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,r,c)}}},{key:"setTranslate",value:function(o,r,c){o.style.transform="translate3d("+r+"px, "+c+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),l}(),ri=function(){function l(){var o=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s(this,l);var c=r.dragEl,d=r.toleranceX,m=d===void 0?40:d,f=r.toleranceY,y=f===void 0?65:f,v=r.slide,S=v===void 0?null:v,C=r.instance,k=C===void 0?null:C;this.el=c,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=m,this.toleranceY=y,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=S,this.instance=k,this.el.addEventListener("mousedown",function(P){return o.dragStart(P)},!1),this.el.addEventListener("mouseup",function(P){return o.dragEnd(P)},!1),this.el.addEventListener("mousemove",function(P){return o.drag(P)},!1)}return a(l,[{key:"dragStart",value:function(o){if(this.slide.classList.contains("zoomed"))this.active=!1;else{o.type==="touchstart"?(this.initialX=o.touches[0].clientX-this.xOffset,this.initialY=o.touches[0].clientY-this.yOffset):(this.initialX=o.clientX-this.xOffset,this.initialY=o.clientY-this.yOffset);var r=o.target.nodeName.toLowerCase();o.target.classList.contains("nodrag")||_(o.target,".nodrag")||["input","select","textarea","button","a"].indexOf(r)!==-1?this.active=!1:(o.preventDefault(),(o.target===this.el||r!=="img"&&_(o.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=_(o.target,".ginner-container")))}}},{key:"dragEnd",value:function(o){var r=this;o&&o.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){r.instance.preventOutsideClick=!1,r.toleranceReached=!1,r.lastDirection=null,r.dragging=!1,r.el.isDragging=!1,r.el.classList.remove("dragging"),r.slide.classList.remove("dragging-nav"),r.dragContainer.style.transform="",r.dragContainer.style.transition=""},100)}},{key:"drag",value:function(o){if(this.active){o.preventDefault(),this.slide.classList.add("dragging-nav"),o.type==="touchmove"?(this.currentX=o.touches[0].clientX-this.initialX,this.currentY=o.touches[0].clientY-this.initialY):(this.currentX=o.clientX-this.initialX,this.currentY=o.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var r=Math.abs(this.currentX),c=Math.abs(this.currentY);if(r>0&&r>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var d=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&d&&(this.doSlideChange=d),this.instance.settings.dragAutoSnap&&d)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),d=="right"&&this.instance.prevSlide(),void(d=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&c>0&&c>=r&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var m=this.shouldClose();return!this.instance.settings.dragAutoSnap&&m&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&m&&this.instance.close())}}}},{key:"shouldChange",value:function(){var o=!1;if(Math.abs(this.currentX)>=this.toleranceX){var r=this.currentX>0?"right":"left";(r=="left"&&this.slide!==this.slide.parentNode.lastChild||r=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(o=r)}return o}},{key:"shouldClose",value:function(){var o=!1;return Math.abs(this.currentY)>=this.toleranceY&&(o=!0),o}},{key:"setTranslate",value:function(o,r,c){var d=arguments.length>3&&arguments[3]!==void 0&&arguments[3];o.style.transition=d?"all .2s ease":"",o.style.transform="translate3d(".concat(r,"px, ").concat(c,"px, 0)")}}]),l}();function $s(l,o,r,c){var d=l.querySelector(".gslide-media"),m=new Image,f="gSlideTitle_"+r,y="gSlideDesc_"+r;m.addEventListener("load",function(){A(c)&&c()},!1),m.src=o.href,o.sizes!=""&&o.srcset!=""&&(m.sizes=o.sizes,m.srcset=o.srcset),m.alt="",H(o.alt)||o.alt===""||(m.alt=o.alt),o.title!==""&&m.setAttribute("aria-labelledby",f),o.description!==""&&m.setAttribute("aria-describedby",y),o.hasOwnProperty("_hasCustomWidth")&&o._hasCustomWidth&&(m.style.width=o.width),o.hasOwnProperty("_hasCustomHeight")&&o._hasCustomHeight&&(m.style.height=o.height),d.insertBefore(m,d.firstChild)}function Bs(l,o,r,c){var d=this,m=l.querySelector(".ginner-container"),f="gvideo"+r,y=l.querySelector(".gslide-media"),v=this.getAllPlayers();g(m,"gvideo-container"),y.insertBefore(q('<div class="gvideo-wrapper"></div>'),y.firstChild);var S=l.querySelector(".gvideo-wrapper");ke(this.settings.plyr.css,"Plyr");var C=o.href,k=o==null?void 0:o.videoProvider,P=!1;y.style.maxWidth=o.width,ke(this.settings.plyr.js,"Plyr",function(){if(!k&&C.match(/vimeo\.com\/([0-9]*)/)&&(k="vimeo"),!k&&(C.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||C.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||C.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/))&&(k="youtube"),k==="local"||!k){k="local";var T='<video id="'+f+'" ';T+='style="background:#000; max-width: '.concat(o.width,';" '),T+='preload="metadata" ',T+='x-webkit-airplay="allow" ',T+="playsinline ",T+="controls ",T+='class="gvideo-local">',T+='<source src="'.concat(C,'">'),P=q(T+="</video>")}var $=P||q('<div id="'.concat(f,'" data-plyr-provider="').concat(k,'" data-plyr-embed-id="').concat(C,'"></div>'));g(S,"".concat(k,"-video gvideo")),S.appendChild($),S.setAttribute("data-id",f),S.setAttribute("data-index",r);var R=M(d.settings.plyr,"config")?d.settings.plyr.config:{},I=new Plyr("#"+f,R);I.on("ready",function(se){v[f]=se.detail.plyr,A(c)&&c()}),ye(function(){return l.querySelector("iframe")&&l.querySelector("iframe").dataset.ready=="true"},function(){d.resize(l)}),I.on("enterfullscreen",ai),I.on("exitfullscreen",ai)})}function ai(l){var o=_(l.target,".gslide-media");l.type==="enterfullscreen"&&g(o,"fullscreen"),l.type==="exitfullscreen"&&x(o,"fullscreen")}function Os(l,o,r,c){var d,m=this,f=l.querySelector(".gslide-media"),y=!(!M(o,"href")||!o.href)&&o.href.split("#").pop().trim(),v=!(!M(o,"content")||!o.content)&&o.content;if(v&&(Z(v)&&(d=q('<div class="ginlined-content">'.concat(v,"</div>"))),K(v))){v.style.display=="none"&&(v.style.display="block");var S=document.createElement("div");S.className="ginlined-content",S.appendChild(v),d=S}if(y){var C=document.getElementById(y);if(!C)return!1;var k=C.cloneNode(!0);k.style.height=o.height,k.style.maxWidth=o.width,g(k,"ginlined-content"),d=k}if(!d)return console.error("Unable to append inline slide content",o),!1;f.style.height=o.height,f.style.width=o.width,f.appendChild(d),this.events["inlineclose"+y]=w("click",{onElement:f.querySelectorAll(".gtrigger-close"),withCallback:function(P){P.preventDefault(),m.close()}}),A(c)&&c()}function Ms(l,o,r,c){var d=l.querySelector(".gslide-media"),m=function(f){var y=f.url,v=f.allow,S=f.callback,C=f.appendTo,k=document.createElement("iframe");return k.className="vimeo-video gvideo",k.src=y,k.style.width="100%",k.style.height="100%",v&&k.setAttribute("allow",v),k.onload=function(){k.onload=null,g(k,"node-ready"),A(S)&&S()},C&&C.appendChild(k),k}({url:o.href,callback:c});d.parentNode.style.maxWidth=o.width,d.parentNode.style.height=o.height,d.appendChild(m)}var Rs=function(){function l(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s(this,l),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},W(o)&&(this.defaults=u(this.defaults,o))}return a(l,[{key:"sourceType",value:function(o){var r=o;return(o=o.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":o.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||o.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||o.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||o.match(/vimeo\.com\/([0-9]*)/)||o.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":o.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":o.indexOf("#")>-1&&r.split("#").pop().trim()!==""?"inline":o.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(o,r){var c=this,d=u({descPosition:r.descPosition},this.defaults);if(W(o)&&!K(o)){M(o,"type")||(M(o,"content")&&o.content?o.type="inline":M(o,"href")&&(o.type=this.sourceType(o.href)));var m=u(d,o);return this.setSize(m,r),m}var f="",y=o.getAttribute("data-glightbox"),v=o.nodeName.toLowerCase();if(v==="a"&&(f=o.href),v==="img"&&(f=o.src,d.alt=o.alt),d.href=f,p(d,function($,R){M(r,R)&&R!=="width"&&(d[R]=r[R]);var I=o.dataset[R];H(I)||(d[R]=c.sanitizeValue(I))}),d.content&&(d.type="inline"),!d.type&&f&&(d.type=this.sourceType(f)),H(y)){if(!d.title&&v=="a"){var S=o.title;H(S)||S===""||(d.title=S)}if(!d.title&&v=="img"){var C=o.alt;H(C)||C===""||(d.title=C)}}else{var k=[];p(d,function($,R){k.push(";\\s?"+R)}),k=k.join("\\s?:|"),y.trim()!==""&&p(d,function($,R){var I=y,se=new RegExp("s?"+R+"s?:s?(.*?)("+k+"s?:|$)"),Q=I.match(se);if(Q&&Q.length&&Q[1]){var ve=Q[1].trim().replace(/;\s*$/,"");d[R]=c.sanitizeValue(ve)}})}if(d.description&&d.description.substring(0,1)==="."){var P;try{P=document.querySelector(d.description).innerHTML}catch($){if(!($ instanceof DOMException))throw $}P&&(d.description=P)}if(!d.description){var T=o.querySelector(".glightbox-desc");T&&(d.description=T.innerHTML)}return this.setSize(d,r,o),this.slideConfig=d,d}},{key:"setSize",value:function(o,r){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=o.type=="video"?this.checkSize(r.videosWidth):this.checkSize(r.width),m=this.checkSize(r.height);return o.width=M(o,"width")&&o.width!==""?this.checkSize(o.width):d,o.height=M(o,"height")&&o.height!==""?this.checkSize(o.height):m,c&&o.type=="image"&&(o._hasCustomWidth=!!c.dataset.width,o._hasCustomHeight=!!c.dataset.height),o}},{key:"checkSize",value:function(o){return Ye(o)?"".concat(o,"px"):o}},{key:"sanitizeValue",value:function(o){return o!=="true"&&o!=="false"?o:o==="true"}}]),l}(),Ue=function(){function l(o,r,c){s(this,l),this.element=o,this.instance=r,this.index=c}return a(l,[{key:"setContent",value:function(){var o=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(E(r,"loaded"))return!1;var d=this.instance.settings,m=this.slideConfig,f=U();A(d.beforeSlideLoad)&&d.beforeSlideLoad({index:this.index,slide:r,player:!1});var y=m.type,v=m.descPosition,S=r.querySelector(".gslide-media"),C=r.querySelector(".gslide-title"),k=r.querySelector(".gslide-desc"),P=r.querySelector(".gdesc-inner"),T=c,$="gSlideTitle_"+this.index,R="gSlideDesc_"+this.index;if(A(d.afterSlideLoad)&&(T=function(){A(c)&&c(),d.afterSlideLoad({index:o.index,slide:r,player:o.instance.getSlidePlayerInstance(o.index)})}),m.title==""&&m.description==""?P&&P.parentNode.parentNode.removeChild(P.parentNode):(C&&m.title!==""?(C.id=$,C.innerHTML=m.title):C.parentNode.removeChild(C),k&&m.description!==""?(k.id=R,f&&d.moreLength>0?(m.smallDescription=this.slideShortDesc(m.description,d.moreLength,d.moreText),k.innerHTML=m.smallDescription,this.descriptionEvents(k,m)):k.innerHTML=m.description):k.parentNode.removeChild(k),g(S.parentNode,"desc-".concat(v)),g(P.parentNode,"description-".concat(v))),g(S,"gslide-".concat(y)),g(r,"loaded"),y!=="video"){if(y!=="external")return y==="inline"?(Os.apply(this.instance,[r,m,this.index,T]),void(m.draggable&&new ri({dragEl:r.querySelector(".gslide-inline"),toleranceX:d.dragToleranceX,toleranceY:d.dragToleranceY,slide:r,instance:this.instance}))):void(y!=="image"?A(T)&&T():$s(r,m,this.index,function(){var I=r.querySelector("img");m.draggable&&new ri({dragEl:I,toleranceX:d.dragToleranceX,toleranceY:d.dragToleranceY,slide:r,instance:o.instance}),m.zoomable&&I.naturalWidth>I.offsetWidth&&(g(I,"zoomable"),new Is(I,r,function(){o.instance.resize()})),A(T)&&T()}));Ms.apply(this,[r,m,this.index,T])}else Bs.apply(this.instance,[r,m,this.index,T])}},{key:"slideShortDesc",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2],d=document.createElement("div");d.innerHTML=o;var m=d.innerText,f=c;if((o=m.trim()).length<=r)return o;var y=o.substr(0,r-1);return f?(d=null,y+'... <a href="#" class="desc-more">'+c+"</a>"):y}},{key:"descriptionEvents",value:function(o,r){var c=this,d=o.querySelector(".desc-more");if(!d)return!1;w("click",{onElement:d,withCallback:function(m,f){m.preventDefault();var y=document.body,v=_(f,".gslide-desc");if(!v)return!1;v.innerHTML=r.description,g(y,"gdesc-open");var S=w("click",{onElement:[y,_(v,".gslide-description")],withCallback:function(C,k){C.target.nodeName.toLowerCase()!=="a"&&(x(y,"gdesc-open"),g(y,"gdesc-closed"),v.innerHTML=r.smallDescription,c.descriptionEvents(v,r),setTimeout(function(){x(y,"gdesc-closed")},400),S.destroy())}})}})}},{key:"create",value:function(){return q(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var o=new Rs(this.instance.settings.slideExtraAttributes);return this.slideConfig=o.parseConfig(this.element,this.instance.settings),this.slideConfig}}]),l}(),ci=U(),li=U()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,hi=document.getElementsByTagName("html")[0],qs={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},Ns=function(){function l(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s(this,l),this.customOptions=o,this.settings=u(qs,o),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1}return a(l,[{key:"init",value:function(){var o=this,r=this.getSelector();r&&(this.baseEvents=w("click",{onElement:r,withCallback:function(c,d){c.preventDefault(),o.open(d)}})),this.elements=this.getElements()}},{key:"open",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var c=Ye(r)?r:this.settings.startAt;if(K(o)){var d=o.getAttribute("data-gallery");d&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,d)),H(c)&&(c=this.getElementIndex(o))<0&&(c=0)}Ye(c)||(c=0),this.build(),L(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var m=document.body,f=window.innerWidth-document.documentElement.clientWidth;if(f>0){var y=document.createElement("style");y.type="text/css",y.className="gcss-styles",y.innerText=".gscrollbar-fixer {margin-right: ".concat(f,"px}"),document.head.appendChild(y),g(m,"gscrollbar-fixer")}g(m,"glightbox-open"),g(hi,"glightbox-open"),ci&&(g(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(c,!0),this.elements.length===1?(g(this.prevButton,"glightbox-button-hidden"),g(this.nextButton,"glightbox-button-hidden")):(x(this.prevButton,"glightbox-button-hidden"),x(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),A(this.settings.onOpen)&&this.settings.onOpen(),li&&this.settings.touchNavigation&&zs(this),this.settings.keyboardNavigation&&As(this)}},{key:"openAt",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,o)}},{key:"showSlide",value:function(){var o=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];V(this.loader),this.index=parseInt(r);var d=this.slidesContainer.querySelector(".current");d&&x(d,"current"),this.slideAnimateOut();var m=this.slidesContainer.querySelectorAll(".gslide")[r];if(E(m,"loaded"))this.slideAnimateIn(m,c),D(this.loader);else{V(this.loader);var f=this.elements[r],y={index:this.index,slide:m,slideNode:m,slideConfig:f.slideConfig,slideIndex:this.index,trigger:f.node,player:null};this.trigger("slide_before_load",y),f.instance.setContent(m,function(){D(o.loader),o.resize(),o.slideAnimateIn(m,c),o.trigger("slide_after_load",y)})}this.slideDescription=m.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&E(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(r+1),this.preloadSlide(r-1)),this.updateNavigationClasses(),this.activeSlide=m}},{key:"preloadSlide",value:function(o){var r=this;if(o<0||o>this.elements.length-1||H(this.elements[o]))return!1;var c=this.slidesContainer.querySelectorAll(".gslide")[o];if(E(c,"loaded"))return!1;var d=this.elements[o],m=d.type,f={index:o,slide:c,slideNode:c,slideConfig:d.slideConfig,slideIndex:o,trigger:d.node,player:null};this.trigger("slide_before_load",f),m==="video"||m==="external"?setTimeout(function(){d.instance.setContent(c,function(){r.trigger("slide_after_load",f)})},200):d.instance.setContent(c,function(){r.trigger("slide_after_load",f)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(o<0||o>this.elements.length-1))return!1;o<0?o=this.elements.length-1:o>=this.elements.length&&(o=0),this.showSlide(o)}},{key:"insertSlide",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;r<0&&(r=this.elements.length);var c=new Ue(o,this,r),d=c.getConfig(),m=u({},d),f=c.create(),y=this.elements.length-1;m.index=r,m.node=!1,m.instance=c,m.slideConfig=d,this.elements.splice(r,0,m);var v=null,S=null;if(this.slidesContainer){if(r>y)this.slidesContainer.appendChild(f);else{var C=this.slidesContainer.querySelectorAll(".gslide")[r];this.slidesContainer.insertBefore(f,C)}(this.settings.preload&&this.index==0&&r==0||this.index-1==r||this.index+1==r)&&this.preloadSlide(r),this.index===0&&r===0&&(this.index=1),this.updateNavigationClasses(),v=this.slidesContainer.querySelectorAll(".gslide")[r],S=this.getSlidePlayerInstance(r),m.slideNode=v}this.trigger("slide_inserted",{index:r,slide:v,slideNode:v,slideConfig:d,slideIndex:r,trigger:null,player:S}),A(this.settings.slideInserted)&&this.settings.slideInserted({index:r,slide:v,player:S})}},{key:"removeSlide",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(o<0||o>this.elements.length-1)return!1;var r=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[o];r&&(this.getActiveSlideIndex()==o&&(o==this.elements.length-1?this.prevSlide():this.nextSlide()),r.parentNode.removeChild(r)),this.elements.splice(o,1),this.trigger("slide_removed",o),A(this.settings.slideRemoved)&&this.settings.slideRemoved(o)}},{key:"slideAnimateIn",value:function(o,r){var c=this,d=o.querySelector(".gslide-media"),m=o.querySelector(".gslide-description"),f={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},y={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(d.offsetWidth>0&&m&&(D(m),m.style.display=""),x(o,this.effectsClasses),r)L(o,this.settings.cssEfects[this.settings.openEffect].in,function(){c.settings.autoplayVideos&&c.slidePlayerPlay(o),c.trigger("slide_changed",{prev:f,current:y}),A(c.settings.afterSlideChange)&&c.settings.afterSlideChange.apply(c,[f,y])});else{var v=this.settings.slideEffect,S=v!=="none"?this.settings.cssEfects[v].in:v;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(S=this.settings.cssEfects.slideBack.in),L(o,S,function(){c.settings.autoplayVideos&&c.slidePlayerPlay(o),c.trigger("slide_changed",{prev:f,current:y}),A(c.settings.afterSlideChange)&&c.settings.afterSlideChange.apply(c,[f,y])})}setTimeout(function(){c.resize(o)},100),g(o,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var o=this.prevActiveSlide;x(o,this.effectsClasses),g(o,"prev");var r=this.settings.slideEffect,c=r!=="none"?this.settings.cssEfects[r].out:r;this.slidePlayerPause(o),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:H(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),A(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(c=this.settings.cssEfects.slideBack.out),L(o,c,function(){var d=o.querySelector(".ginner-container"),m=o.querySelector(".gslide-media"),f=o.querySelector(".gslide-description");d.style.transform="",m.style.transform="",x(m,"greset"),m.style.opacity="",f&&(f.style.opacity=""),x(o,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(o){var r="gvideo"+o,c=this.getAllPlayers();return!(!M(c,r)||!c[r])&&c[r]}},{key:"stopSlideVideo",value:function(o){if(K(o)){var r=o.querySelector(".gvideo-wrapper");r&&(o=r.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var c=this.getSlidePlayerInstance(o);c&&c.playing&&c.pause()}},{key:"slidePlayerPause",value:function(o){if(K(o)){var r=o.querySelector(".gvideo-wrapper");r&&(o=r.getAttribute("data-index"))}var c=this.getSlidePlayerInstance(o);c&&c.playing&&c.pause()}},{key:"playSlideVideo",value:function(o){if(K(o)){var r=o.querySelector(".gvideo-wrapper");r&&(o=r.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var c=this.getSlidePlayerInstance(o);c&&!c.playing&&c.play()}},{key:"slidePlayerPlay",value:function(o){var r;if(!ci||(r=this.settings.plyr.config)!==null&&r!==void 0&&r.muted){if(K(o)){var c=o.querySelector(".gvideo-wrapper");c&&(o=c.getAttribute("data-index"))}var d=this.getSlidePlayerInstance(o);d&&!d.playing&&(d.play(),this.settings.autofocusVideos&&d.elements.container.focus())}}},{key:"setElements",value:function(o){var r=this;this.settings.elements=!1;var c=[];o&&o.length&&p(o,function(d,m){var f=new Ue(d,r,m),y=f.getConfig(),v=u({},y);v.slideConfig=y,v.instance=f,v.index=m,c.push(v)}),this.elements=c,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(p(this.elements,function(){var d=q(r.settings.slideHTML);r.slidesContainer.appendChild(d)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(o){var r=!1;return p(this.elements,function(c,d){if(M(c,"node")&&c.node==o)return r=d,!0}),r}},{key:"getElements",value:function(){var o=this,r=[];this.elements=this.elements?this.elements:[],!H(this.settings.elements)&&de(this.settings.elements)&&this.settings.elements.length&&p(this.settings.elements,function(d,m){var f=new Ue(d,o,m),y=f.getConfig(),v=u({},y);v.node=!1,v.index=m,v.instance=f,v.slideConfig=y,r.push(v)});var c=!1;return this.getSelector()&&(c=document.querySelectorAll(this.getSelector())),c&&p(c,function(d,m){var f=new Ue(d,o,m),y=f.getConfig(),v=u({},y);v.node=d,v.index=m,v.instance=f,v.slideConfig=y,v.gallery=d.getAttribute("data-gallery"),r.push(v)}),r}},{key:"getGalleryElements",value:function(o,r){return o.filter(function(c){return c.gallery==r})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var o=[];for(var r in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(r)){var c=this.settings.cssEfects[r];o.push("g".concat(c.in)),o.push("g".concat(c.out))}return o.join(" ")}},{key:"build",value:function(){var o=this;if(this.built)return!1;var r=document.body.childNodes,c=[];p(r,function(C){C.parentNode==document.body&&C.nodeName.charAt(0)!=="#"&&C.hasAttribute&&!C.hasAttribute("aria-hidden")&&(c.push(C),C.setAttribute("aria-hidden","true"))});var d=M(this.settings.svg,"next")?this.settings.svg.next:"",m=M(this.settings.svg,"prev")?this.settings.svg.prev:"",f=M(this.settings.svg,"close")?this.settings.svg.close:"",y=this.settings.lightboxHTML;y=q(y=(y=(y=y.replace(/{nextSVG}/g,d)).replace(/{prevSVG}/g,m)).replace(/{closeSVG}/g,f)),document.body.appendChild(y);var v=document.getElementById("glightbox-body");this.modal=v;var S=v.querySelector(".gclose");this.prevButton=v.querySelector(".gprev"),this.nextButton=v.querySelector(".gnext"),this.overlay=v.querySelector(".goverlay"),this.loader=v.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=c,this.events={},g(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&S&&(this.events.close=w("click",{onElement:S,withCallback:function(C,k){C.preventDefault(),o.close()}})),S&&!this.settings.closeButton&&S.parentNode.removeChild(S),this.nextButton&&(this.events.next=w("click",{onElement:this.nextButton,withCallback:function(C,k){C.preventDefault(),o.nextSlide()}})),this.prevButton&&(this.events.prev=w("click",{onElement:this.prevButton,withCallback:function(C,k){C.preventDefault(),o.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=w("click",{onElement:v,withCallback:function(C,k){o.preventOutsideClick||E(document.body,"glightbox-mobile")||_(C.target,".ginner-container")||_(C.target,".gbtn")||E(C.target,"gnext")||E(C.target,"gprev")||o.close()}})),p(this.elements,function(C,k){o.slidesContainer.appendChild(C.instance.create()),C.slideNode=o.slidesContainer.querySelectorAll(".gslide")[k]}),li&&g(document.body,"glightbox-touch"),this.events.resize=w("resize",{onElement:window,withCallback:function(){o.resize()}}),this.built=!0}},{key:"resize",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((o=o||this.activeSlide)&&!E(o,"zoomed")){var r=N(),c=o.querySelector(".gvideo-wrapper"),d=o.querySelector(".gslide-image"),m=this.slideDescription,f=r.width,y=r.height;if(f<=768?g(document.body,"glightbox-mobile"):x(document.body,"glightbox-mobile"),c||d){var v=!1;if(m&&(E(m,"description-bottom")||E(m,"description-top"))&&!E(m,"gabsolute")&&(v=!0),d){if(f<=768)d.querySelector("img");else if(v){var S=m.offsetHeight,C=d.querySelector("img");C.setAttribute("style","max-height: calc(100vh - ".concat(S,"px)")),m.setAttribute("style","max-width: ".concat(C.offsetWidth,"px;"))}}if(c){var k=M(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!k){var P=c.clientWidth,T=c.clientHeight,$=P/T;k="".concat(P/$,":").concat(T/$)}var R=k.split(":"),I=this.settings.videosWidth,se=this.settings.videosWidth,Q=(se=Ye(I)||I.indexOf("px")!==-1?parseInt(I):I.indexOf("vw")!==-1?f*parseInt(I)/100:I.indexOf("vh")!==-1?y*parseInt(I)/100:I.indexOf("%")!==-1?f*parseInt(I)/100:parseInt(c.clientWidth))/(parseInt(R[0])/parseInt(R[1]));if(Q=Math.floor(Q),v&&(y-=m.offsetHeight),se>f||Q>y||y<Q&&f>se){var ve=c.offsetWidth,we=c.offsetHeight,Se=y/we,Te={width:ve*Se,height:we*Se};c.parentNode.setAttribute("style","max-width: ".concat(Te.width,"px")),v&&m.setAttribute("style","max-width: ".concat(Te.width,"px;"))}else c.parentNode.style.maxWidth="".concat(I),v&&m.setAttribute("style","max-width: ".concat(I,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var o=this.loop();x(this.nextButton,"disabled"),x(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(g(this.prevButton,"disabled"),g(this.nextButton,"disabled")):this.index!==0||o?this.index!==this.elements.length-1||o||g(this.nextButton,"disabled"):g(this.prevButton,"disabled")}},{key:"loop",value:function(){var o=M(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return o=M(this.settings,"loop")?this.settings.loop:o,o}},{key:"close",value:function(){var o=this;if(!this.lightboxOpen){if(this.events){for(var r in this.events)this.events.hasOwnProperty(r)&&this.events[r].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&p(this.bodyHiddenChildElms,function(c){c.removeAttribute("aria-hidden")}),g(this.modal,"glightbox-closing"),L(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),L(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(o.activeSlide=null,o.prevActiveSlideIndex=null,o.prevActiveSlide=null,o.built=!1,o.events){for(var c in o.events)o.events.hasOwnProperty(c)&&o.events[c].destroy();o.events=null}var d=document.body;x(hi,"glightbox-open"),x(d,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),o.modal.parentNode.removeChild(o.modal),o.trigger("close"),A(o.settings.onClose)&&o.settings.onClose();var m=document.querySelector(".gcss-styles");m&&m.parentNode.removeChild(m),o.lightboxOpen=!1,o.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(o,r){var c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!o||!A(r))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:o,once:c,callback:r})}},{key:"once",value:function(o,r){this.on(o,r,!0)}},{key:"trigger",value:function(o){var r=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=[];p(this.apiEvents,function(m,f){var y=m.evt,v=m.once,S=m.callback;y==o&&(S(c),v&&d.push(f))}),d.length&&p(d,function(m){return r.apiEvents.splice(m,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.1.0"}}]),l}();return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=new Ns(l);return o.init(),o}})})(ua);const ma=Kt;window.startGlightbox=()=>{ma({selector:".glightbox",touchNavigation:!0,loop:!0,autoplayVideos:!0,onOpen:()=>{document.querySelectorAll(".glightbox-open").forEach(e=>{e.style.overflow="inherit"})},beforeSlideLoad:(i,e)=>{}})};startGlightbox();const pa=new URLSearchParams(window.location.search),ga=pa.get("iframe");window.setInitialToMin=!ga;document.addEventListener("click",i=>{const e=i.target.closest("#close-chat-button"),t=i.target.closest("#chat-minimized-section");if(e){window.chatOpened=!1,document.querySelector("#chat-section").style.display="none",document.querySelector("#chat-minimized-section").style.display="block";const s=getMinChatWidth(),n=document.querySelector("#chat-minimized-content").offsetHeight;document.documentElement.style.background="transparent",window.parent.postMessage({newCssText:`visibility: visible; z-index: 202; position: fixed; height: ${n}px; width: ${s}px; border: none; border-radius: 0.38rem; right: 0px; bottom: 20px; max-width: 100vw; max-height: 100vh;`,setInitialToMin:!0,focus:!1,isMobile:hasTouchScreen},"*"),document.querySelector("#chat-messages").scrollTo({top:document.querySelector("#chat-messages-bottom").offsetTop,behavior:"smooth"})}else if(t){window.chatOpened=!0,document.querySelector("#chat-section").style.display="block",document.querySelector("#chat-minimized-section").style.display="none";let s="400px",n="600px",a="20px",h="20px";hasTouchScreen&&(s="100%",n="100%",a="0px",h="0px"),document.documentElement.style.background=null,window.parent.postMessage({newCssText:`visibility: visible; z-index: 202; position: fixed; height: ${n}; width: ${s}; border: none; border-radius: 0.38rem; right: ${h}; bottom: ${a}; max-width: 100vw; max-height: 100vh;`,setInitialToMin:!!hasTouchScreen,focus:!0,isMobile:hasTouchScreen},"*"),document.querySelector("#chat-messages").scrollTop=0}});window.location===window.parent.location?document.querySelector("#close-chat-button").style.display="none":triggerClick(document.querySelector("#close-chat-button"));
